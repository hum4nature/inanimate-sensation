window.nitroSponsor=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Init="init",t.Loaded="loaded",t.Cached="cached",t.Lookup="lookup",t.Ready="ready"}(n||(n={})),e.status=n.Init,e.init=function(t,o){e.user=new i(t,o)};function r(t){e.status=t;var o=new CustomEvent("nitroSponsor.status",{detail:{status:t}});document.dispatchEvent(o)}var i=function(){function t(t,e){this.noAds=!1,this.config=t,this.callback=e,this.getUserInfo(),this.updateDOM()}return t.prototype.url=function(){return"https://sponsor.nitrocnct.com/product/"+this.config.product+"?token="+this.config.token+"&successUrl="+this.config.successUrl+"&cancelUrl="+this.config.cancelUrl},t.prototype.updateDOM=function(){for(var t=document.querySelectorAll("a.np-sponsor-link"),e=0;e<t.length;e++)t[e].setAttribute("href",this.url())},t.prototype.getUserInfo=function(){var t=this;r(n.Lookup),this.readCache();var e=new AbortController,o=e.signal;setTimeout(function(){return e.abort()},1e3),fetch("https://sponsor-api.nitrocnct.com/v1/users?token="+this.config.token,{signal:o}).then(function(e){e.ok?e.json().then(function(e){t.userData=e,t.userData.subscription&&"active"===t.userData.subscription.status&&t.userData.subscription.tier.benefits&&t.userData.subscription.tier.benefits.some(function(t){return 1===t.id})&&(t.noAds=!0),t.updateCache(),r(n.Ready),t.callback&&t.callback(t);var o=new CustomEvent("nitroSponsor.userLoaded",{detail:{user:t}});document.dispatchEvent(o)}):console.warn(e.statusText)})},t.prototype.readCache=function(){if(localStorage){var t=localStorage.getItem("nitroSponsorCache");if(t){var e=JSON.parse(atob(t)),o=this.getDataFromToken();o&&e.userData.user.id==o.sub&&e.userData.user.siteId==o.iss&&(Object.assign(this,e),r(n.Cached))}}},t.prototype.updateCache=function(){if(localStorage)try{localStorage.setItem("nitroSponsorCache",btoa(JSON.stringify(this)))}catch(t){}},t.prototype.getDataFromToken=function(){var t=this.config.token.split(".");return 3!=t.length?null:JSON.parse(atob(t[1]))},t}();if(r(n.Loaded),window.nitroSponsor&&window.nitroSponsor.queue)for(var s=0,a=window.nitroSponsor.queue;s<a.length;s++){var u=a[s];this[u[0]].apply(this,u[1])}}]);