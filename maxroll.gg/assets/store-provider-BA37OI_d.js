import{r,j as a}from"./jsx-runtime-BmCkTyBI.js";import{i as g,N as u,Q as p,R}from"./useUiStateStore-BTW2eq2x.js";import{S as f}from"./immer-Dw4EE-Qj.js";const c=s=>{const n={poe:s,league:g(s)[0],prefferedRegions:[],globalRules:{},listingSettings:{},lastListingsPosted:{},lastRegionInputValue:void 0};return u()(p(f((e,l)=>({...n,reset:()=>e(n),setLeague:t=>e({league:t}),setPrefferedRegions:t=>e({prefferedRegions:t}),setGlobalRules:t=>e({globalRules:t}),setListingSettings:t=>e(o=>{let i=o.listingSettings;return typeof t=="function"?i=t(i):i=t,{listingSettings:i}}),setLastListingsPosted:t=>e({lastListingsPosted:t}),setLastRegionInputValue:t=>e({lastRegionInputValue:t})})),{name:`poexchange-${s}-service-listing-tool-store`,storage:R(()=>localStorage),partialize:e=>({league:e.league,prefferedRegions:e.prefferedRegions,globalRules:e.globalRules,listingSettings:e.listingSettings,lastRegionInputValue:e.lastRegionInputValue}),version:1,migrate:(e,l)=>{}}))},L=(s,n)=>`${s}-${n}`,d=r.createContext(null),I=({children:s,poe:n})=>{const e=r.useRef();return(!e.current||e.current.getState().poe!==n)&&(e.current=c(n)),a.jsx(d.Provider,{value:e.current,children:s})};export{L as I,I as l,d as s};
