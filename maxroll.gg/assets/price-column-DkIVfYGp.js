import{r as E,j as m}from"./jsx-runtime-BmCkTyBI.js";import{aw as le,ax as Y,ay as oe,az as I,aA as R,aB as A,aC as ee,aD as ce,H as ue,ag as P,ah as M,ai as B,aE as H,ak as U,aa as G,ac as de,aF as Z,u as pe,Z as me,a7 as he}from"./useUiStateStore-BTW2eq2x.js";import{y as ne}from"./hover-card-evu0jAM8.js";var J,q;function fe(){return q||(q=1,J={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),J}var ge=fe();const ye=le(ge);var xe=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Q(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(ye[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var o=new RegExp(xe),s=null;(s=o.exec(e))!==null;)if(s[0].trim())if(s[1]){var f=s[1].trim(),h=[f,""];f.indexOf("=")>-1&&(h=f.split("=")),n.attrs[h[0]]=h[1],o.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var be=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ve=/^\s*$/,je=Object.create(null);function te(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var r=[];for(var o in t)r.push(o+'="'+t[o]+'"');return r.length?" "+r.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(te,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var Ne={parse:function(e,n){n||(n={}),n.components||(n.components=je);var t,r=[],o=[],s=-1,f=!1;if(e.indexOf("<")!==0){var h=e.indexOf("<");r.push({type:"text",content:h===-1?e:e.substring(0,h)})}return e.replace(be,function(g,v){if(f){if(g!=="</"+t.name+">")return;f=!1}var d,c=g.charAt(1)!=="/",y=g.startsWith("<!--"),l=v+g.length,a=e.charAt(l);if(y){var j=Q(g);return s<0?(r.push(j),r):((d=o[s]).children.push(j),r)}if(c&&(s++,(t=Q(g)).type==="tag"&&n.components[t.name]&&(t.type="component",f=!0),t.voidElement||f||!a||a==="<"||t.children.push({type:"text",content:e.slice(l,e.indexOf("<",l))}),s===0&&r.push(t),(d=o[s-1])&&d.children.push(t),o[s]=t),(!c||t.voidElement)&&(s>-1&&(t.voidElement||t.name===g.slice(2,-1))&&(s--,t=s===-1?r:o[s]),!f&&a!=="<"&&a)){d=s===-1?r:o[s].children;var u=e.indexOf("<",l),p=e.slice(l,u===-1?void 0:u);ve.test(p)&&(p=" "),(u>-1&&s+d.length>=0||p!==" ")&&d.push({type:"text",content:p})}}),r},stringify:function(e){return e.reduce(function(n,t){return n+te("",t)},"")}};const _=(e,n)=>{var r;if(!e)return!1;const t=((r=e.props)==null?void 0:r.children)??e.children;return n?t.length>0:!!t},D=e=>{var t,r;if(!e)return[];const n=((t=e.props)==null?void 0:t.children)??e.children;return(r=e.props)!=null&&r.i18nIsDynamicList?S(n):n},we=e=>Array.isArray(e)&&e.every(E.isValidElement),S=e=>Array.isArray(e)?e:[e],$e=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},re=(e,n,t,r)=>{if(!e)return"";let o="";const s=S(e),f=n!=null&&n.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((h,g)=>{if(I(h)){o+=`${h}`;return}if(E.isValidElement(h)){const{props:v,type:d}=h,c=Object.keys(v).length,y=f.indexOf(d)>-1,l=v.children;if(!l&&y&&!c){o+=`<${d}/>`;return}if(!l&&(!y||c)||v.i18nIsDynamicList){o+=`<${g}></${g}>`;return}if(y&&c===1&&I(l)){o+=`<${d}>${l}</${d}>`;return}const a=re(l,n,t,r);o+=`<${g}>${a}</${g}>`;return}if(h===null){R(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(A(h)){const{format:v,...d}=h,c=Object.keys(d);if(c.length===1){const y=v?`${c[0]}, ${v}`:c[0];o+=`{{${y}}}`;return}R(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:h});return}R(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:h})}),o},Ee=(e,n,t,r,o,s)=>{if(n==="")return[];const f=r.transKeepBasicHtmlNodesFor||[],h=n&&new RegExp(f.map(u=>`<${u}`).join("|")).test(n);if(!e&&!h&&!s)return[n];const g={},v=u=>{S(u).forEach(p=>{I(p)||(_(p)?v(D(p)):A(p)&&!E.isValidElement(p)&&Object.assign(g,p))})};v(e);const d=Ne.parse(`<0>${n}</0>`),c={...g,...o},y=(u,p,x)=>{var i;const N=D(u),b=a(N,p.children,x);return we(N)&&b.length===0||(i=u.props)!=null&&i.i18nIsDynamicList?N:b},l=(u,p,x,N,b)=>{u.dummy?(u.children=p,x.push(E.cloneElement(u,{key:N},b?void 0:p))):x.push(...E.Children.map([u],i=>{const O={...i.props};return delete O.i18nIsDynamicList,E.createElement(i.type,{...O,key:N,ref:i.props.ref??i.ref},b?null:p)}))},a=(u,p,x)=>{const N=S(u);return S(p).reduce((b,i,O)=>{var F,K;const k=((K=(F=i.children)==null?void 0:F[0])==null?void 0:K.content)&&t.services.interpolator.interpolate(i.children[0].content,c,t.language);if(i.type==="tag"){let C=N[parseInt(i.name,10)];x.length===1&&!C&&(C=x[0][i.name]),C||(C={});const w=Object.keys(i.attrs).length!==0?$e({props:i.attrs},C):C,V=E.isValidElement(w),L=V&&_(i,!0)&&!i.voidElement,T=h&&A(w)&&w.dummy&&!V,W=A(e)&&Object.hasOwnProperty.call(e,i.name);if(I(w)){const $=t.services.interpolator.interpolate(w,c,t.language);b.push($)}else if(_(w)||L){const $=y(w,i,x);l(w,$,b,O)}else if(T){const $=a(N,i.children,x);l(w,$,b,O)}else if(Number.isNaN(parseFloat(i.name)))if(W){const $=y(w,i,x);l(w,$,b,O,i.voidElement)}else if(r.transSupportBasicHtmlNodes&&f.indexOf(i.name)>-1)if(i.voidElement)b.push(E.createElement(i.name,{key:`${i.name}-${O}`}));else{const $=a(N,i.children,x);b.push(E.createElement(i.name,{key:`${i.name}-${O}`},$))}else if(i.voidElement)b.push(`<${i.name} />`);else{const $=a(N,i.children,x);b.push(`<${i.name}>${$}</${i.name}>`)}else if(A(w)&&!V){const $=i.children[0]?k:null;$&&b.push($)}else l(w,k,b,O,i.children.length!==1||!k)}else if(i.type==="text"){const C=r.transWrapTextNodes,w=s?r.unescape(t.services.interpolator.interpolate(i.content,c,t.language)):t.services.interpolator.interpolate(i.content,c,t.language);C?b.push(E.createElement(C,{key:`${i.name}-${O}`},w)):b.push(w)}return b},[])},j=a([{dummy:!0,children:e||[]}],d,S(e||[]));return D(j[0])},se=(e,n,t)=>{const r=e.key||n,o=E.cloneElement(e,{key:r});if(!o.props||!o.props.children||t.indexOf(`${n}/>`)<0&&t.indexOf(`${n} />`)<0)return o;function s(){return E.createElement(E.Fragment,null,o)}return E.createElement(s,{key:r})},Oe=(e,n)=>e.map((t,r)=>se(t,r,n)),Ce=(e,n)=>{const t={};return Object.keys(e).forEach(r=>{Object.assign(t,{[r]:se(e[r],r,n)})}),t},ke=(e,n,t,r)=>e?Array.isArray(e)?Oe(e,n):A(e)?Ce(e,n):(Y(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function Ve({children:e,count:n,parent:t,i18nKey:r,context:o,tOptions:s={},values:f,defaults:h,components:g,ns:v,i18n:d,t:c,shouldUnescape:y,...l}){var V,L,T,W,$,z;const a=d||ee();if(!a)return Y(a,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const j=c||a.t.bind(a)||(ae=>ae),u={...oe(),...(V=a.options)==null?void 0:V.react};let p=v||j.ns||((L=a.options)==null?void 0:L.defaultNS);p=I(p)?[p]:p||["translation"];const x=re(e,u,a,r),N=h||x||u.transEmptyNodeValue||r,{hashTransKey:b}=u,i=r||(b?b(x||N):x||N);(W=(T=a.options)==null?void 0:T.interpolation)!=null&&W.defaultVariables&&(f=f&&Object.keys(f).length>0?{...f,...a.options.interpolation.defaultVariables}:{...a.options.interpolation.defaultVariables});const O=f||n!==void 0&&!((z=($=a.options)==null?void 0:$.interpolation)!=null&&z.alwaysFormat)||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},k={...s,context:o||s.context,count:n,...f,...O,defaultValue:N,ns:p},F=i?j(i,k):N,K=ke(g,F,a,r),C=Ee(K||e,F,a,u,k,y),w=t??u.defaultTransParent;return w?E.createElement(w,l,C):C}function X({children:e,count:n,parent:t,i18nKey:r,context:o,tOptions:s={},values:f,defaults:h,components:g,ns:v,i18n:d,t:c,shouldUnescape:y,...l}){var x;const{i18n:a,defaultNS:j}=E.useContext(ce)||{},u=d||a||ee(),p=c||(u==null?void 0:u.t.bind(u));return Ve({children:e,count:n,parent:t,i18nKey:r,context:o,tOptions:s,values:f,defaults:h,components:g,ns:v||(p==null?void 0:p.ns)||j||((x=u==null?void 0:u.options)==null?void 0:x.defaultNS),i18n:u,t:c,shouldUnescape:y,...l})}const ie=({value:e,showChange:n,poe:t,currency:r,toCurrency:o,listings:s,isLowConfidence:f,warningWording:h})=>{const{t:g}=ue();if(r&&t){const v=pe(parseFloat(`${e}`),2),d=me(t,r);return m.jsxs("div",{className:"flex flex-1 gap-1 items-center",children:[m.jsx("div",{className:"min-w-fit",children:v}),t==="poe1"?m.jsx("img",{width:20,height:20,className:"min-w-5",src:d.src,alt:d.alt}):m.jsx("img",{width:20,height:20,className:"min-w-5",src:d.src,alt:d.alt})]})}return m.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[h&&m.jsx(P,{delayDuration:0,children:m.jsxs(M,{children:[m.jsx(B,{asChild:!0,children:m.jsx(H,{className:"w-4 h-4 text-yellow-400"})}),m.jsx(U,{className:"bg-amber-600",children:m.jsx(G,{className:"whitespace-pre-line",children:g(h)})})]})}),f&&m.jsx(P,{delayDuration:0,children:m.jsxs(M,{children:[m.jsx(B,{asChild:!0,children:m.jsx(H,{className:"w-4 h-4 text-yellow-400"})}),m.jsx(U,{className:"bg-amber-600",children:m.jsx(G,{className:"whitespace-pre-line",children:s?m.jsxs(X,{i18nKey:"label.lowConfidenceWarning",values:{count:s},children:[m.jsx("strong",{children:"Warning:"})," Medium confidence. Price is based on a relatively low number of listings. Listed ~25"]}):m.jsxs(X,{i18nKey:"label.lowConfidenceWarningShort",values:{count:s},children:[m.jsx("strong",{children:"Warning:"})," Medium confidence. Price is based on a relatively low number of listings."]})})})]})}),m.jsx("div",{className:"flex-1 h-full items-center",children:typeof e=="number"?m.jsx(de,{poe:t,value:e,showChange:n,toCurrency:o,splitIcons:!1,className:"flex w-full h-full items-center justify-end",innerClassName:"flex w-full gap-1 h-full items-center justify-end"}):e?m.jsxs("div",{className:"flex gap-1 h-full items-center justify-end",children:[e,m.jsx("img",{width:20,height:20,className:"min-w-5",src:Z.c.src,alt:Z.c.alt})]}):null})]})};function Ie({poe:e,accessorKey:n,accessorFn:t,headerName:r,toCurrency:o,showChange:s,warningWordingFn:f,cumulativeColumn:h,lowConfidenceFn:g,enableSorting:v,...d}){return{id:n,accessorKey:n,accessorFn:t,header:({column:c})=>m.jsx(ne,{column:c,title:r||"",align:"right"}),enableSorting:v??!0,enableGlobalFilter:!1,enableResizing:!0,sortingFn:(c,y,l)=>{const a=c.getValue(l),j=y.getValue(l);return typeof a=="number"&&typeof j=="number"?a-j:typeof a=="number"?a-0:0-j},minSize:45,size:60,meta:{headerWording:r},cell:({row:c,table:y})=>{let l=0;if(h){const p=y.getSortedRowModel().flatRows;for(let x=0;x<p.length;x++){const N=p[x].getValue(h);if(N!==void 0&&typeof N!="string"&&N!==null&&(l+=N),p[x].id===c.id)break}}else if(n&&(l=c.getValue(n),l===-1))return m.jsx("div",{className:"flex justify-end",children:"N/A"});const{lowConfidence:a,listings:j}=g?g(c.original,c.index):{lowConfidence:!1,listings:void 0},u=f?f(c,l):void 0;return m.jsx(ie,{poe:e,value:l,showChange:s,toCurrency:o,listings:j,isLowConfidence:a,warningWording:u})},...d}}function Ke({accessorKey:e,accessorFn:n,headerName:t,getValue:r,getValueType:o,poe:s,toCurrency:f,showChange:h,enableSorting:g,...v}){return{id:e,accessorKey:e,accessorFn:n,header:({column:d})=>m.jsx(ne,{column:d,title:t||"",align:"right"}),enableSorting:g??!0,enableGlobalFilter:!1,enableResizing:!0,sortingFn:(d,c,y)=>{const l=d.getValue(y),a=c.getValue(y);return typeof l=="number"&&typeof a=="number"?l-a:typeof l=="number"?l-0:0-a},minSize:30,size:60,meta:{headerWording:t},cell:({row:d})=>{const c=he(),y=s==="poe1"?c:void 0,l=r(d.original),a=o?o(d.original):void 0;let j=l;return s==="poe1"&&l&&a==="d"&&(y?j=l*y:j=-1),j?j===-1?m.jsx("div",{className:"flex justify-end",children:"N/A"}):m.jsx(ie,{value:j,showChange:h,poe:s,currency:s==="poe2"?a:void 0,toCurrency:f}):m.jsx("div",{className:"flex justify-end",children:"-"})},...v}}export{Ke as A,Ie as N};
