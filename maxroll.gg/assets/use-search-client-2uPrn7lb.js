import{g as Rt,r as T,o as Jt,c as Re}from"./jsx-runtime-BmCkTyBI.js";import{k as zt}from"./util-DPeyOfYu.js";function q(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Qe=q;q.prototype._events=void 0;q.prototype._maxListeners=void 0;q.defaultMaxListeners=10;q.prototype.setMaxListeners=function(t){if(!Zt(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};q.prototype.emit=function(t){var e,n,r,i,s,a;if(this._events||(this._events={}),t==="error"&&(!this._events.error||Z(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],wt(n))return!1;if(L(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Z(n))for(i=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,s=0;s<r;s++)a[s].apply(this,i);return!0};q.prototype.addListener=function(t,e){var n;if(!L(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,L(e.listener)?e.listener:e),this._events[t]?Z(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Z(this._events[t])&&!this._events[t].warned&&(wt(this._maxListeners)?n=q.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};q.prototype.on=q.prototype.addListener;q.prototype.once=function(t,e){if(!L(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this};q.prototype.removeListener=function(t,e){var n,r,i,s;if(!L(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],i=n.length,r=-1,n===e||L(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Z(n)){for(s=i;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};q.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],L(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this};q.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:L(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};q.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(L(e))return 1;if(e)return e.length}return 0};q.listenerCount=function(t,e){return t.listenerCount(e)};function L(t){return typeof t=="function"}function Zt(t){return typeof t=="number"}function Z(t){return typeof t=="object"&&t!==null}function wt(t){return t===void 0}const Gi=Rt(Qe);function Xt(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}var Ft=Xt,Yt=Qe,en=Ft;function pe(t,e){this.main=t,this.fn=e,this.lastResults=null}en(pe,Yt);pe.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};pe.prototype.getModifiedState=function(t){return this.fn(t)};var tn=pe;function nn(t){return typeof t!="string"?t:String(t).replace(/^-/,"\\-")}function rn(t){return typeof t!="string"?t:t.replace(/^\\-/,"-")}var Ne={escapeFacetValue:nn,unescapeFacetValue:rn};function sn(t){return typeof t=="object"&&t!==null?$e(Array.isArray(t)?[]:{},t):t}function fe(t){return typeof t=="function"||Array.isArray(t)||Object.prototype.toString.call(t)==="[object Object]"}function $e(t,e){if(t===e)return t;for(var n in e)if(!(!Object.prototype.hasOwnProperty.call(e,n)||n==="__proto__"||n==="constructor")){var r=e[n],i=t[n];typeof i<"u"&&typeof r>"u"||(fe(i)&&fe(r)?t[n]=$e(i,r):t[n]=sn(r))}return t}function an(t){fe(t)||(t={});for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];fe(r)&&$e(t,r)}return t}var ge=an;function un(t){return t&&Object.keys(t).length>0}var Le=un;function cn(t,e){if(t===null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Ue=cn,we=ge;function Fe(t){return Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})}var C={_getQueries:function(e,n){var r=[];return r.push({indexName:e,params:C._getHitsSearchParams(n)}),n.getRefinedDisjunctiveFacets().forEach(function(i){r.push({indexName:e,params:C._getDisjunctiveFacetSearchParams(n,i)})}),n.getRefinedHierarchicalFacets().forEach(function(i){var s=n.getHierarchicalFacetByName(i),a=n.getHierarchicalRefinement(i),u=n._getHierarchicalFacetSeparator(s);if(a.length>0&&a[0].split(u).length>1){var c=a[0].split(u).slice(0,-1).reduce(function(f,d,g){return f.concat({attribute:s.attributes[g],value:g===0?d:[f[f.length-1].value,d].join(u)})},[]);c.forEach(function(o,f){var d=C._getDisjunctiveFacetSearchParams(n,o.attribute,f===0);function g(R){return s.attributes.some(function(w){return w===R.split(":")[0]})}var m=(d.facetFilters||[]).reduce(function(R,w){if(Array.isArray(w)){var P=w.filter(function(E){return!g(E)});P.length>0&&R.push(P)}return typeof w=="string"&&!g(w)&&R.push(w),R},[]),b=c[f-1];f>0?d.facetFilters=m.concat(b.attribute+":"+b.value):d.facetFilters=m.length>0?m:void 0,r.push({indexName:e,params:d})})}}),r},_getHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets).concat(C._getHitsHierarchicalFacetsAttributes(t)).sort(),n=C._getFacetFilters(t),r=C._getNumericFilters(t),i=C._getTagFilters(t),s={facets:e.indexOf("*")>-1?["*"]:e,tagFilters:i};return n.length>0&&(s.facetFilters=n),r.length>0&&(s.numericFilters=r),Fe(we({},t.getQueryParams(),s))},_getDisjunctiveFacetSearchParams:function(t,e,n){var r=C._getFacetFilters(t,e,n),i=C._getNumericFilters(t,e),s=C._getTagFilters(t),a={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};s.length>0&&(a.tagFilters=s);var u=t.getHierarchicalFacetByName(e);return u?a.facets=C._getDisjunctiveHierarchicalFacetAttribute(t,u,n):a.facets=e,i.length>0&&(a.numericFilters=i),r.length>0&&(a.facetFilters=r),Fe(we({},t.getQueryParams(),a))},_getNumericFilters:function(t,e){if(t.numericFilters)return t.numericFilters;var n=[];return Object.keys(t.numericRefinements).forEach(function(r){var i=t.numericRefinements[r]||{};Object.keys(i).forEach(function(s){var a=i[s]||[];e!==r&&a.forEach(function(u){if(Array.isArray(u)){var c=u.map(function(o){return r+s+o});n.push(c)}else n.push(r+s+u)})})}),n},_getTagFilters:function(t){return t.tagFilters?t.tagFilters:t.tagRefinements.join(",")},_getFacetFilters:function(t,e,n){var r=[],i=t.facetsRefinements||{};Object.keys(i).sort().forEach(function(c){var o=i[c]||[];o.sort().forEach(function(f){r.push(c+":"+f)})});var s=t.facetsExcludes||{};Object.keys(s).sort().forEach(function(c){var o=s[c]||[];o.sort().forEach(function(f){r.push(c+":-"+f)})});var a=t.disjunctiveFacetsRefinements||{};Object.keys(a).sort().forEach(function(c){var o=a[c]||[];if(!(c===e||!o||o.length===0)){var f=[];o.sort().forEach(function(d){f.push(c+":"+d)}),r.push(f)}});var u=t.hierarchicalFacetsRefinements||{};return Object.keys(u).sort().forEach(function(c){var o=u[c]||[],f=o[0];if(f!==void 0){var d=t.getHierarchicalFacetByName(c),g=t._getHierarchicalFacetSeparator(d),m=t._getHierarchicalRootPath(d),b,R;if(e===c){if(f.indexOf(g)===-1||!m&&n===!0||m&&m.split(g).length===f.split(g).length)return;m?(R=m.split(g).length-1,f=m):(R=f.split(g).length-2,f=f.slice(0,f.lastIndexOf(g))),b=d.attributes[R]}else R=f.split(g).length-1,b=d.attributes[R];b&&r.push([b+":"+f])}}),r},_getHitsHierarchicalFacetsAttributes:function(t){var e=[];return t.hierarchicalFacets.reduce(function(r,i){var s=t.getHierarchicalRefinement(i.name)[0];if(!s)return r.push(i.attributes[0]),r;var a=t._getHierarchicalFacetSeparator(i),u=s.split(a).length,c=i.attributes.slice(0,u+1);return r.concat(c)},e)},_getDisjunctiveHierarchicalFacetAttribute:function(t,e,n){var r=t._getHierarchicalFacetSeparator(e);if(n===!0){var i=t._getHierarchicalRootPath(e),s=0;return i&&(s=i.split(r).length),[e.attributes[s]]}var a=t.getHierarchicalRefinement(e.name)[0]||"",u=a.split(r).length-1;return e.attributes.slice(0,u+1)},getSearchForFacetQuery:function(t,e,n,r){var i=r.isDisjunctiveFacet(t)?r.clearRefinements(t):r,s={facetQuery:e,facetName:t};return typeof n=="number"&&(s.maxFacetHits=n),Fe(we({},C._getHitsSearchParams(i),s))}},on=C,Ve=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(i){r[i]!==void 0&&(n[i]!==void 0&&delete n[i],n[i]=r[i])}),n},{})},ve=function(e,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return e[r]}};function fn(t,e){return t.filter(function(n,r){return e.indexOf(n)>-1&&t.indexOf(n)===r})}var hn=fn;function Pt(t){if(typeof t=="number")return t;if(typeof t=="string")return parseFloat(t);if(Array.isArray(t))return t.map(Pt);throw new Error("The value should be a number, a parsable string or an array of those.")}var dn=Pt,ln=function(e){return e===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(e)},pn=Ve,gn=Le,vn=Ue,G={addRefinement:function(e,n,r){if(G.isRefined(e,n,r))return e;var i=""+r,s=e[n]?e[n].concat(i):[i],a={};return a[n]=s,pn({},a,e)},removeRefinement:function(e,n,r){if(r===void 0)return G.clearRefinement(e,function(s,a){return n===a});var i=""+r;return G.clearRefinement(e,function(s,a){return n===a&&i===s})},toggleRefinement:function(e,n,r){if(r===void 0)throw new Error("toggleRefinement should be used with a value");return G.isRefined(e,n,r)?G.removeRefinement(e,n,r):G.addRefinement(e,n,r)},clearRefinement:function(e,n,r){if(n===void 0)return gn(e)?{}:e;if(typeof n=="string")return vn(e,[n]);if(typeof n=="function"){var i=!1,s=Object.keys(e).reduce(function(a,u){var c=e[u]||[],o=c.filter(function(f){return!n(f,u,r)});return o.length!==c.length&&(i=!0),a[u]=o,a},{});return i?s:e}},isRefined:function(e,n,r){var i=!!e[n]&&e[n].length>0;if(r===void 0||!i)return i;var s=""+r;return e[n].indexOf(s)!==-1}},mn=G,Pe=Ve,xt=ve,Je=hn,_e=ge,He=Le,ze=Ue,xe=dn,yn=ln,_=mn;function We(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(function(n,r){return We(e[r],n)}):t===e}function bn(t,e){return xt(t,function(n){return We(n,e)})}function B(t){var e=t?B._parseNumbers(t):{};e.userToken!==void 0&&!yn(e.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=e.facets||[],this.disjunctiveFacets=e.disjunctiveFacets||[],this.hierarchicalFacets=e.hierarchicalFacets||[],this.facetsRefinements=e.facetsRefinements||{},this.facetsExcludes=e.facetsExcludes||{},this.disjunctiveFacetsRefinements=e.disjunctiveFacetsRefinements||{},this.numericRefinements=e.numericRefinements||{},this.tagRefinements=e.tagRefinements||[],this.hierarchicalFacetsRefinements=e.hierarchicalFacetsRefinements||{};var n=this;Object.keys(e).forEach(function(r){var i=B.PARAMETERS.indexOf(r)!==-1,s=e[r]!==void 0;!i&&s&&(n[r]=e[r])})}B.PARAMETERS=Object.keys(new B);B._parseNumbers=function(t){if(t instanceof B)return t;var e={},n=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(n.forEach(function(i){var s=t[i];if(typeof s=="string"){var a=parseFloat(s);e[i]=isNaN(a)?s:a}}),Array.isArray(t.insideBoundingBox)&&(e.insideBoundingBox=t.insideBoundingBox.map(function(i){return Array.isArray(i)?i.map(function(s){return parseFloat(s)}):i})),t.numericRefinements){var r={};Object.keys(t.numericRefinements).forEach(function(i){var s=t.numericRefinements[i]||{};r[i]={},Object.keys(s).forEach(function(a){var u=s[a],c=u.map(function(o){return Array.isArray(o)?o.map(function(f){return typeof f=="string"?parseFloat(f):f}):typeof o=="string"?parseFloat(o):o});r[i][a]=c})}),e.numericRefinements=r}return _e({},t,e)};B.make=function(e){var n=new B(e),r=e.hierarchicalFacets||[];return r.forEach(function(i){if(i.rootPath){var s=n.getHierarchicalRefinement(i.name);s.length>0&&s[0].indexOf(i.rootPath)!==0&&(n=n.clearRefinements(i.name)),s=n.getHierarchicalRefinement(i.name),s.length===0&&(n=n.toggleHierarchicalFacetRefinement(i.name,i.rootPath))}}),n};B.validate=function(t,e){var n=e||{};return t.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):t.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):t.numericFilters&&n.numericRefinements&&He(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):He(t.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};B.prototype={constructor:B,clearRefinements:function(e){var n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:_.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:_.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:_.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:_.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(t,e,n){var r=xe(n);if(this.isNumericRefined(t,e,r))return this;var i=_e({},this.numericRefinements);return i[t]=_e({},i[t]),i[t][e]?(i[t][e]=i[t][e].slice(),i[t][e].push(r)):i[t][e]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsRefinements[t]||[]:[]},getDisjunctiveRefinements:function(t){return this.isDisjunctiveFacet(t)?this.disjunctiveFacetsRefinements[t]||[]:[]},getHierarchicalRefinement:function(t){return this.hierarchicalFacetsRefinements[t]||[]},getExcludeRefinements:function(t){return this.isConjunctiveFacet(t)?this.facetsExcludes[t]||[]:[]},removeNumericRefinement:function(t,e,n){var r=n;return r!==void 0?this.isNumericRefined(t,e,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===t&&i.op===e&&We(i.val,xe(r))})}):this:e!==void 0?this.isNumericRefined(t,e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===t&&i.op===e})}):this:this.isNumericRefined(t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===t})}):this},getNumericRefinements:function(t){return this.numericRefinements[t]||{}},getNumericRefinement:function(t,e){return this.numericRefinements[t]&&this.numericRefinements[t][e]},_clearNumericRefinements:function(e){if(e===void 0)return He(this.numericRefinements)?{}:this.numericRefinements;if(typeof e=="string")return ze(this.numericRefinements,[e]);if(typeof e=="function"){var n=!1,r=this.numericRefinements,i=Object.keys(r).reduce(function(s,a){var u=r[a],c={};return u=u||{},Object.keys(u).forEach(function(o){var f=u[o]||[],d=[];f.forEach(function(g){var m=e({val:g,op:o},a,"numeric");m||d.push(g)}),d.length!==f.length&&(n=!0),c[o]=d}),s[a]=c,s},{});return n?i:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return _.isRefined(this.facetsRefinements,e,n)?this:this.setQueryParameters({facetsRefinements:_.addRefinement(this.facetsRefinements,e,n)})},addExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return _.isRefined(this.facetsExcludes,e,n)?this:this.setQueryParameters({facetsExcludes:_.addRefinement(this.facetsExcludes,e,n)})},addDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return _.isRefined(this.disjunctiveFacetsRefinements,e,n)?this:this.setQueryParameters({disjunctiveFacetsRefinements:_.addRefinement(this.disjunctiveFacetsRefinements,e,n)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(n)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter(function(n){return n!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(n){return n!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(n){return n.name!==e})}):this},removeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return _.isRefined(this.facetsRefinements,e,n)?this.setQueryParameters({facetsRefinements:_.removeRefinement(this.facetsRefinements,e,n)}):this},removeExcludeRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return _.isRefined(this.facetsExcludes,e,n)?this.setQueryParameters({facetsExcludes:_.removeRefinement(this.facetsExcludes,e,n)}):this},removeDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return _.isRefined(this.disjunctiveFacetsRefinements,e,n)?this.setQueryParameters({disjunctiveFacetsRefinements:_.removeRefinement(this.disjunctiveFacetsRefinements,e,n)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var n={tagRefinements:this.tagRefinements.filter(function(r){return r!==e})};return this.setQueryParameters(n)},toggleRefinement:function(e,n){return this.toggleFacetRefinement(e,n)},toggleFacetRefinement:function(e,n){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,n);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,n);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,n);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:_.toggleRefinement(this.facetsRefinements,e,n)})},toggleExcludeFacetRefinement:function(e,n){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:_.toggleRefinement(this.facetsExcludes,e,n)})},toggleDisjunctiveFacetRefinement:function(e,n){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:_.toggleRefinement(this.disjunctiveFacetsRefinements,e,n)})},toggleHierarchicalFacetRefinement:function(e,n){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),i={},s=this.hierarchicalFacetsRefinements[e]!==void 0&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===n||this.hierarchicalFacetsRefinements[e][0].indexOf(n+r)===0);return s?n.indexOf(r)===-1?i[e]=[]:i[e]=[n.slice(0,n.lastIndexOf(r))]:i[e]=[n],this.setQueryParameters({hierarchicalFacetsRefinements:Pe({},i,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(t,e){if(this.isHierarchicalFacetRefined(t))throw new Error(t+" is already refined.");if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[t]=[e],this.setQueryParameters({hierarchicalFacetsRefinements:Pe({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(t){if(!this.isHierarchicalFacetRefined(t))return this;var e={};return e[t]=[],this.setQueryParameters({hierarchicalFacetsRefinements:Pe({},e,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(t){return this.disjunctiveFacets.indexOf(t)>-1},isHierarchicalFacet:function(t){return this.getHierarchicalFacetByName(t)!==void 0},isConjunctiveFacet:function(t){return this.facets.indexOf(t)>-1},isFacetRefined:function(e,n){return this.isConjunctiveFacet(e)?_.isRefined(this.facetsRefinements,e,n):!1},isExcludeRefined:function(e,n){return this.isConjunctiveFacet(e)?_.isRefined(this.facetsExcludes,e,n):!1},isDisjunctiveFacetRefined:function(e,n){return this.isDisjunctiveFacet(e)?_.isRefined(this.disjunctiveFacetsRefinements,e,n):!1},isHierarchicalFacetRefined:function(e,n){if(!this.isHierarchicalFacet(e))return!1;var r=this.getHierarchicalRefinement(e);return n?r.indexOf(n)!==-1:r.length>0},isNumericRefined:function(e,n,r){if(r===void 0&&n===void 0)return!!this.numericRefinements[e];var i=this.numericRefinements[e]&&this.numericRefinements[e][n]!==void 0;if(r===void 0||!i)return i;var s=xe(r),a=bn(this.numericRefinements[e][n],s)!==void 0;return i&&a},isTagRefined:function(e){return this.tagRefinements.indexOf(e)!==-1},getRefinedDisjunctiveFacets:function(){var e=this,n=Je(Object.keys(this.numericRefinements).filter(function(r){return Object.keys(e.numericRefinements[r]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(r){return e.disjunctiveFacetsRefinements[r].length>0}).concat(n).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var e=this;return Je(this.hierarchicalFacets.map(function(n){return n.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(n){return e.hierarchicalFacetsRefinements[n].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return t.indexOf(e)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,n={},r=this;return Object.keys(this).forEach(function(i){var s=r[i];e.indexOf(i)===-1&&s!==void 0&&(n[i]=s)}),n},setQueryParameter:function(e,n){if(this[e]===n)return this;var r={};return r[e]=n,this.setQueryParameters(r)},setQueryParameters:function(e){if(!e)return this;var n=B.validate(this,e);if(n)throw n;var r=this,i=B._parseNumbers(e),s=Object.keys(this).reduce(function(u,c){return u[c]=r[c],u},{}),a=Object.keys(i).reduce(function(u,c){var o=u[c]!==void 0,f=i[c]!==void 0;return o&&!f?ze(u,[c]):(f&&(u[c]=i[c]),u)},s);return new this.constructor(a)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(t){return t.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(t){return t.separator||" > "},_getHierarchicalRootPath:function(t){return t.rootPath||null},_getHierarchicalShowParentLevel:function(t){return typeof t.showParentLevel=="boolean"?t.showParentLevel:!0},getHierarchicalFacetByName:function(t){return xt(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(t){if(!this.isHierarchicalFacet(t))return[];var e=this.getHierarchicalRefinement(t)[0];if(!e)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),r=e.split(n);return r.map(function(i){return i.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var At=B,Rn=function(e){return Array.isArray(e)?e.filter(Boolean):[]},wn=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(n(e[r]))return r;return-1},Fn=ve,Et=function(e,n){var r=(n||[]).map(function(i){return i.split(":")});return e.reduce(function(s,a){var u=a.split(":"),c=Fn(r,function(o){return o[0]===u[0]});return u.length>1||!c?(s[0].push(u[0]),s[1].push(u[1]),s):(s[0].push(c[0]),s[1].push(c[1]),s)},[[],[]])};function Pn(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=e!==void 0,s=e===null;if(!s&&t>e||r&&i||!n)return 1;if(!r&&t<e||s&&n||!i)return-1}return 0}function xn(t,e,n){if(!Array.isArray(t))return[];Array.isArray(n)||(n=[]);var r=t.map(function(i,s){return{criteria:e.map(function(a){return i[a]}),index:s,value:i}});return r.sort(function(s,a){for(var u=-1;++u<s.criteria.length;){var c=Pn(s.criteria[u],a.criteria[u]);if(c)return u>=n.length?c:n[u]==="desc"?-c:c}return s.index-a.index}),r.map(function(i){return i.value})}var jt=xn,An=_n,Ot=Ne,En=ve,jn=Et,On=jt,Tn=Ot.escapeFacetValue,Sn=Ot.unescapeFacetValue;function _n(t){return function(n,r){var i=t.hierarchicalFacets[r],s=t.hierarchicalFacetsRefinements[i.name]&&t.hierarchicalFacetsRefinements[i.name][0]||"",a=t._getHierarchicalFacetSeparator(i),u=t._getHierarchicalRootPath(i),c=t._getHierarchicalShowParentLevel(i),o=jn(t._getHierarchicalFacetSortBy(i)),f=n.every(function(m){return m.exhaustive}),d=Hn(o,a,u,c,s),g=n;return u&&(g=n.slice(u.split(a).length)),g.reduce(d,{name:t.hierarchicalFacets[r].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:f,data:null})}}function Hn(t,e,n,r,i){return function(a,u,c){var o=a;if(c>0){var f=0;for(o=a;f<c;){var d=o&&Array.isArray(o.data)?o.data:[];o=En(d,function(m){return m.isRefined}),f++}}if(o){var g=Object.keys(u.data).map(function(m){return[m,u.data[m]]}).filter(function(m){var b=m[0];return kn(b,o.path||n,i,e,n,r)});o.data=On(g.map(function(m){var b=m[0],R=m[1];return Dn(R,b,e,Sn(i),u.exhaustive)}),t[0],t[1])}return a}}function kn(t,e,n,r,i,s){return i&&(t.indexOf(i)!==0||i===t)?!1:!i&&t.indexOf(r)===-1||i&&t.split(r).length-i.split(r).length===1||t.indexOf(r)===-1&&n.indexOf(r)===-1||n.indexOf(t)===0||t.indexOf(e+r)===0&&(s||t.indexOf(n)===0)}function Dn(t,e,n,r,i){var s=e.split(n);return{name:s[s.length-1].trim(),path:e,escapedValue:Tn(e),count:t,isRefined:r===e||r.indexOf(e+n)===0,exhaustive:i,data:null}}var Ae=Rn,he=Ve,Tt=Ne,N=ve,z=wn,qn=Et,Mn=ge,St=jt,Ze=Tt.escapeFacetValue,_t=Tt.unescapeFacetValue,In=An;function Xe(t){var e={};return t.forEach(function(n,r){e[n]=r}),e}function Ee(t,e,n){e&&e[n]&&(t.stats=e[n])}function Bn(t,e){return N(t,function(r){var i=r.attributes||[];return i.indexOf(e)>-1})}function U(t,e,n){var r=e[0];this._rawResults=e;var i=this;Object.keys(r).forEach(function(f){i[f]=r[f]}),Object.keys(n||{}).forEach(function(f){i[f]=n[f]}),this.processingTimeMS=e.reduce(function(f,d){return d.processingTimeMS===void 0?f:f+d.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=t.hierarchicalFacets.map(function(){return[]}),this.facets=[];var s=t.getRefinedDisjunctiveFacets(),a=Xe(t.facets),u=Xe(t.disjunctiveFacets),c=1,o=r.facets||{};Object.keys(o).forEach(function(f){var d=o[f],g=Bn(t.hierarchicalFacets,f);if(g){var m=g.attributes.indexOf(f),b=z(t.hierarchicalFacets,function(E){return E.name===g.name});i.hierarchicalFacets[b][m]={attribute:f,data:d,exhaustive:r.exhaustiveFacetsCount}}else{var R=t.disjunctiveFacets.indexOf(f)!==-1,w=t.facets.indexOf(f)!==-1,P;R&&(P=u[f],i.disjunctiveFacets[P]={name:f,data:d,exhaustive:r.exhaustiveFacetsCount},Ee(i.disjunctiveFacets[P],r.facets_stats,f)),w&&(P=a[f],i.facets[P]={name:f,data:d,exhaustive:r.exhaustiveFacetsCount},Ee(i.facets[P],r.facets_stats,f))}}),this.hierarchicalFacets=Ae(this.hierarchicalFacets),s.forEach(function(f){var d=e[c],g=d&&d.facets?d.facets:{},m=t.getHierarchicalFacetByName(f);Object.keys(g).forEach(function(b){var R=g[b],w;if(m){w=z(t.hierarchicalFacets,function(F){return F.name===m.name});var P=z(i.hierarchicalFacets[w],function(F){return F.attribute===b});if(P===-1)return;i.hierarchicalFacets[w][P].data=Mn({},i.hierarchicalFacets[w][P].data,R)}else{w=u[b];var E=r.facets&&r.facets[b]||{};i.disjunctiveFacets[w]={name:b,data:he({},R,E),exhaustive:d.exhaustiveFacetsCount},Ee(i.disjunctiveFacets[w],d.facets_stats,b),t.disjunctiveFacetsRefinements[b]&&t.disjunctiveFacetsRefinements[b].forEach(function(F){!i.disjunctiveFacets[w].data[F]&&t.disjunctiveFacetsRefinements[b].indexOf(_t(F))>-1&&(i.disjunctiveFacets[w].data[F]=0)})}}),c++}),t.getRefinedHierarchicalFacets().forEach(function(f){var d=t.getHierarchicalFacetByName(f),g=t._getHierarchicalFacetSeparator(d),m=t.getHierarchicalRefinement(f);m.length===0||m[0].split(g).length<2||e.slice(c).forEach(function(b){var R=b&&b.facets?b.facets:{};Object.keys(R).forEach(function(w){var P=R[w],E=z(t.hierarchicalFacets,function(M){return M.name===d.name}),F=z(i.hierarchicalFacets[E],function(M){return M.attribute===w});if(F!==-1){var H={};if(m.length>0){var Q=m[0].split(g)[0];H[Q]=i.hierarchicalFacets[E][F].data[Q]}i.hierarchicalFacets[E][F].data=he(H,P,i.hierarchicalFacets[E][F].data)}}),c++})}),Object.keys(t.facetsExcludes).forEach(function(f){var d=t.facetsExcludes[f],g=a[f];i.facets[g]={name:f,data:o[f],exhaustive:r.exhaustiveFacetsCount},d.forEach(function(m){i.facets[g]=i.facets[g]||{name:f},i.facets[g].data=i.facets[g].data||{},i.facets[g].data[m]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(In(t)),this.facets=Ae(this.facets),this.disjunctiveFacets=Ae(this.disjunctiveFacets),this._state=t}U.prototype.getFacetByName=function(t){function e(n){return n.name===t}return N(this.facets,e)||N(this.disjunctiveFacets,e)||N(this.hierarchicalFacets,e)};function Cn(t,e){function n(f){return f.name===e}if(t._state.isConjunctiveFacet(e)){var r=N(t.facets,n);return r?Object.keys(r.data).map(function(f){var d=Ze(f);return{name:f,escapedValue:d,count:r.data[f],isRefined:t._state.isFacetRefined(e,d),isExcluded:t._state.isExcludeRefined(e,f)}}):[]}else if(t._state.isDisjunctiveFacet(e)){var i=N(t.disjunctiveFacets,n);return i?Object.keys(i.data).map(function(f){var d=Ze(f);return{name:f,escapedValue:d,count:i.data[f],isRefined:t._state.isDisjunctiveFacetRefined(e,d)}}):[]}else if(t._state.isHierarchicalFacet(e)){var s=N(t.hierarchicalFacets,n);if(!s)return s;var a=t._state.getHierarchicalFacetByName(e),u=t._state._getHierarchicalFacetSeparator(a),c=_t(t._state.getHierarchicalRefinement(e)[0]||"");c.indexOf(a.rootPath)===0&&(c=c.replace(a.rootPath+u,""));var o=c.split(u);return o.unshift(e),Ht(s,o,0),s}}function Ht(t,e,n){t.isRefined=t.name===e[n],t.data&&t.data.forEach(function(r){Ht(r,e,n+1)})}function kt(t,e,n,r){if(r=r||0,Array.isArray(e))return t(e,n[r]);if(!e.data||e.data.length===0)return e;var i=e.data.map(function(u){return kt(t,u,n,r+1)}),s=t(i,n[r]),a=he({data:s},e);return a}U.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function Qn(t,e){return e.sort(t)}function Nn(t,e){var n=[],r=[],i=e.order||[],s=i.reduce(function(c,o,f){return c[o]=f,c},{});t.forEach(function(c){var o=c.path||c.name;s[o]!==void 0?n[s[o]]=c:r.push(c)}),n=n.filter(function(c){return c});var a=e.sortRemainingBy,u;return a==="hidden"?n:(a==="alpha"?u=[["path","name"],["asc","asc"]]:u=[["count"],["desc"]],n.concat(St(r,u[0],u[1])))}function $n(t,e){return t.renderingContent&&t.renderingContent.facetOrdering&&t.renderingContent.facetOrdering.values&&t.renderingContent.facetOrdering.values[e]}U.prototype.getFacetValues=function(t,e){var n=Cn(this,t);if(n){var r=he({},e,{sortBy:U.DEFAULT_SORT,facetOrdering:!(e&&e.sortBy)}),i=this,s;if(Array.isArray(n))s=[t];else{var a=i._state.getHierarchicalFacetByName(n.name);s=a.attributes}return kt(function(u,c){if(r.facetOrdering){var o=$n(i,c);if(o)return Nn(u,o)}if(Array.isArray(r.sortBy)){var f=qn(r.sortBy,U.DEFAULT_SORT);return St(u,f[0],f[1])}else if(typeof r.sortBy=="function")return Qn(r.sortBy,u);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},n,s)}};U.prototype.getFacetStats=function(t){if(this._state.isConjunctiveFacet(t))return Ye(this.facets,t);if(this._state.isDisjunctiveFacet(t))return Ye(this.disjunctiveFacets,t)};function Ye(t,e){var n=N(t,function(r){return r.name===e});return n&&n.stats}U.prototype.getRefinements=function(){var t=this._state,e=this,n=[];return Object.keys(t.facetsRefinements).forEach(function(r){t.facetsRefinements[r].forEach(function(i){n.push(je(t,"facet",r,i,e.facets))})}),Object.keys(t.facetsExcludes).forEach(function(r){t.facetsExcludes[r].forEach(function(i){n.push(je(t,"exclude",r,i,e.facets))})}),Object.keys(t.disjunctiveFacetsRefinements).forEach(function(r){t.disjunctiveFacetsRefinements[r].forEach(function(i){n.push(je(t,"disjunctive",r,i,e.disjunctiveFacets))})}),Object.keys(t.hierarchicalFacetsRefinements).forEach(function(r){t.hierarchicalFacetsRefinements[r].forEach(function(i){n.push(Ln(t,r,i,e.hierarchicalFacets))})}),Object.keys(t.numericRefinements).forEach(function(r){var i=t.numericRefinements[r];Object.keys(i).forEach(function(s){i[s].forEach(function(a){n.push({type:"numeric",attributeName:r,name:a,numericValue:a,operator:s})})})}),t.tagRefinements.forEach(function(r){n.push({type:"tag",attributeName:"_tags",name:r})}),n};function je(t,e,n,r,i){var s=N(i,function(c){return c.name===n}),a=s&&s.data&&s.data[r]?s.data[r]:0,u=s&&s.exhaustive||!1;return{type:e,attributeName:n,name:r,count:a,exhaustive:u}}function Ln(t,e,n,r){var i=t.getHierarchicalFacetByName(e),s=t._getHierarchicalFacetSeparator(i),a=n.split(s),u=N(r,function(g){return g.name===e}),c=a.reduce(function(g,m){var b=g&&N(g.data,function(R){return R.name===m});return b!==void 0?b:g},u),o=c&&c.count||0,f=c&&c.exhaustive||!1,d=c&&c.path||"";return{type:"hierarchical",attributeName:e,name:d,count:o,exhaustive:f}}var Dt=U,qt="3.15.0",Un=Qe,Vn=tn,Wn=Ne.escapeFacetValue,Kn=Ft,Gn=ge,Jn=Le,zn=Ue,J=on,Ke=At,ke=Dt,Mt=qt;function y(t,e,n){typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+Mt+")"),this.setClient(t);var r=n||{};r.index=e,this.state=Ke.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}Kn(y,Un);y.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};y.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};y.prototype.getQuery=function(){var t=this.state;return J._getHitsSearchParams(t)};y.prototype.searchOnce=function(t,e){var n=t?this.state.setQueryParameters(t):this.state,r=J._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),e){this.client.search(r).then(function(s){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),e(null,new ke(n,s.results),n)}).catch(function(s){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),e(s,null,n)});return}return this.client.search(r).then(function(s){return i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),{content:new ke(n,s.results),state:n,_originalResponse:s}},function(s){throw i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),s})};y.prototype.findAnswers=function(t){console.warn("[algoliasearch-helper] answers is no longer supported");var e=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(e),i=Gn({attributesForPrediction:t.attributesForPrediction,nbHits:t.nbHits},{params:zn(J._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),s="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(s);var a=this.client.initIndex(r.index);if(typeof a.findAnswers!="function")throw new Error(s);return a.findAnswers(r.query,t.queryLanguages,i)};y.prototype.searchForFacetValues=function(t,e,n,r){var i=typeof this.client.searchForFacetValues=="function",s=typeof this.client.initIndex=="function";if(!i&&!s&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),u=a.isDisjunctiveFacet(t),c=J.getSearchForFacetQuery(t,e,n,a);this._currentNbQueries++;var o=this,f;return i?f=this.client.searchForFacetValues([{indexName:a.index,params:c}]):s?f=this.client.initIndex(a.index).searchForFacetValues(c):(delete c.facetName,f=this.client.search([{type:"facet",facet:t,indexName:a.index,params:c}]).then(function(g){return g.results[0]})),this.emit("searchForFacetValues",{state:a,facet:t,query:e}),f.then(function(g){return o._currentNbQueries--,o._currentNbQueries===0&&o.emit("searchQueueEmpty"),g=Array.isArray(g)?g[0]:g,g.facetHits.forEach(function(m){m.escapedValue=Wn(m.value),m.isRefined=u?a.isDisjunctiveFacetRefined(t,m.escapedValue):a.isFacetRefined(t,m.escapedValue)}),g},function(d){throw o._currentNbQueries--,o._currentNbQueries===0&&o.emit("searchQueueEmpty"),d})};y.prototype.setQuery=function(t){return this._change({state:this.state.resetPage().setQuery(t),isPageReset:!0}),this};y.prototype.clearRefinements=function(t){return this._change({state:this.state.resetPage().clearRefinements(t),isPageReset:!0}),this};y.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};y.prototype.addDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};y.prototype.addHierarchicalFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.addNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().addNumericRefinement(t,e,n),isPageReset:!0}),this};y.prototype.addFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().addFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};y.prototype.addFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().addExcludeRefinement(t,e),isPageReset:!0}),this};y.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};y.prototype.addTag=function(t){return this._change({state:this.state.resetPage().addTagRefinement(t),isPageReset:!0}),this};y.prototype.removeNumericRefinement=function(t,e,n){return this._change({state:this.state.resetPage().removeNumericRefinement(t,e,n),isPageReset:!0}),this};y.prototype.removeDisjunctiveFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};y.prototype.removeHierarchicalFacetRefinement=function(t){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(t),isPageReset:!0}),this};y.prototype.removeFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().removeFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};y.prototype.removeFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().removeExcludeRefinement(t,e),isPageReset:!0}),this};y.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};y.prototype.removeTag=function(t){return this._change({state:this.state.resetPage().removeTagRefinement(t),isPageReset:!0}),this};y.prototype.toggleFacetExclusion=function(t,e){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};y.prototype.toggleRefinement=function(t,e){return this.toggleFacetRefinement(t,e)};y.prototype.toggleFacetRefinement=function(t,e){return this._change({state:this.state.resetPage().toggleFacetRefinement(t,e),isPageReset:!0}),this};y.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};y.prototype.toggleTag=function(t){return this._change({state:this.state.resetPage().toggleTagRefinement(t),isPageReset:!0}),this};y.prototype.nextPage=function(){var t=this.state.page||0;return this.setPage(t+1)};y.prototype.previousPage=function(){var t=this.state.page||0;return this.setPage(t-1)};function It(t){if(t<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(t),isPageReset:!1}),this}y.prototype.setCurrentPage=It;y.prototype.setPage=It;y.prototype.setIndex=function(t){return this._change({state:this.state.resetPage().setIndex(t),isPageReset:!0}),this};y.prototype.setQueryParameter=function(t,e){return this._change({state:this.state.resetPage().setQueryParameter(t,e),isPageReset:!0}),this};y.prototype.setState=function(t){return this._change({state:Ke.make(t),isPageReset:!1}),this};y.prototype.overrideStateWithoutTriggeringChangeEvent=function(t){return this.state=new Ke(t),this};y.prototype.hasRefinements=function(t){return Jn(this.state.getNumericRefinements(t))?!0:this.state.isConjunctiveFacet(t)?this.state.isFacetRefined(t):this.state.isDisjunctiveFacet(t)?this.state.isDisjunctiveFacetRefined(t):this.state.isHierarchicalFacet(t)?this.state.isHierarchicalFacetRefined(t):!1};y.prototype.isExcluded=function(t,e){return this.state.isExcludeRefined(t,e)};y.prototype.isDisjunctiveRefined=function(t,e){return this.state.isDisjunctiveFacetRefined(t,e)};y.prototype.hasTag=function(t){return this.state.isTagRefined(t)};y.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};y.prototype.getIndex=function(){return this.state.index};function Bt(){return this.state.page}y.prototype.getCurrentPage=Bt;y.prototype.getPage=Bt;y.prototype.getTags=function(){return this.state.tagRefinements};y.prototype.getRefinements=function(t){var e=[];if(this.state.isConjunctiveFacet(t)){var n=this.state.getConjunctiveRefinements(t);n.forEach(function(a){e.push({value:a,type:"conjunctive"})});var r=this.state.getExcludeRefinements(t);r.forEach(function(a){e.push({value:a,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(t)){var i=this.state.getDisjunctiveRefinements(t);i.forEach(function(a){e.push({value:a,type:"disjunctive"})})}var s=this.state.getNumericRefinements(t);return Object.keys(s).forEach(function(a){var u=s[a];e.push({value:u,operator:a,type:"numeric"})}),e};y.prototype.getNumericRefinement=function(t,e){return this.state.getNumericRefinement(t,e)};y.prototype.getHierarchicalFacetBreadcrumb=function(t){return this.state.getHierarchicalFacetBreadcrumb(t)};y.prototype._search=function(t){var e=this.state,n=[],r=[];t.onlyWithDerivedHelpers||(r=J._getQueries(e.index,e),n.push({state:e,queriesCount:r.length,helper:this}),this.emit("search",{state:e,results:this.lastResults}));var i=this.derivedHelpers.map(function(u){var c=u.getModifiedState(e),o=c.index?J._getQueries(c.index,c):[];return n.push({state:c,queriesCount:o.length,helper:u}),u.emit("search",{state:c,results:u.lastResults}),o}),s=Array.prototype.concat.apply(r,i),a=this._queryId++;if(this._currentNbQueries++,!s.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,n,a));try{this.client.search(s).then(this._dispatchAlgoliaResponse.bind(this,n,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(u){this.emit("error",{error:u})}};y.prototype._dispatchAlgoliaResponse=function(t,e,n){if(!(e<this._lastQueryIdReceived)){this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var r=n.results.slice();t.forEach(function(i){var s=i.state,a=i.queriesCount,u=i.helper,c=r.splice(0,a);if(!s.index){u.emit("result",{results:null,state:s});return}u.lastResults=new ke(s,c),u.emit("result",{results:u.lastResults,state:s})})}};y.prototype._dispatchAlgoliaError=function(t,e){t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this.emit("error",{error:e}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};y.prototype.containsRefinement=function(t,e,n,r){return t||e.length!==0||n.length!==0||r.length!==0};y.prototype._hasDisjunctiveRefinements=function(t){return this.state.disjunctiveRefinements[t]&&this.state.disjunctiveRefinements[t].length>0};y.prototype._change=function(t){var e=t.state,n=t.isPageReset;e!==this.state&&(this.state=e,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))};y.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};y.prototype.setClient=function(t){return this.client===t?this:(typeof t.addAlgoliaAgent=="function"&&t.addAlgoliaAgent("JS Helper ("+Mt+")"),this.client=t,this)};y.prototype.getClient=function(){return this.client};y.prototype.derive=function(t){var e=new Vn(this,t);return this.derivedHelpers.push(e),e};y.prototype.detachDerivedHelper=function(t){var e=this.derivedHelpers.indexOf(t);if(e===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)};y.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Zn=y,Ct=Zn,Xn=At,Yn=Dt;function ie(t,e,n){return new Ct(t,e,n)}ie.version=qt;ie.AlgoliaSearchHelper=Ct;ie.SearchParameters=Xn;ie.SearchResults=Yn;var er=ie;const tr=Rt(er);function Ji(){}function nr(t){return Object.prototype.toString.call(t).slice(8,-1)}function zi(t,e){if(t===void 0||typeof t!="function")throw new Error("The render function is not valid (received type ".concat(nr(t),`).

`).concat(e))}var rr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qt=/[&<>"']/g,ir=RegExp(Qt.source);function sr(t){return t&&ir.test(t)?t.replace(Qt,function(e){return rr[e]}):t}var ar={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nt=/&(amp|quot|lt|gt|#39);/g,ur=RegExp(Nt.source);function Zi(t){return t&&ur.test(t)?t.replace(Nt,function(e){return ar[e]}):t}function De(t){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(t)}function cr(t){return t===null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function or(t){return De(t)==="object"&&t!==null}function fr(t){if(!or(t)||cr(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function X(t){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(t)}function hr(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qe.apply(this,arguments)}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(r){$t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $t(t,e,n){return e=dr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dr(t){var e=lr(t,"string");return X(e)==="symbol"?e:String(e)}function lr(t,e){if(X(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(X(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tt={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},nt={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function pr(t){return sr(t).replace(new RegExp(tt.highlightPreTag,"g"),nt.highlightPreTag).replace(new RegExp(tt.highlightPostTag,"g"),nt.highlightPostTag)}function de(t){return fr(t)&&typeof t.value!="string"?Object.keys(t).reduce(function(e,n){return ue(ue({},e),{},$t({},n,de(t[n])))},{}):Array.isArray(t)?t.map(de):ue(ue({},t),{},{value:pr(t.value)})}function Xi(t){return t.__escaped===void 0&&(t=t.map(function(e){var n=qe({},(hr(e),e));return n._highlightResult&&(n._highlightResult=de(n._highlightResult)),n._snippetResult&&(n._snippetResult=de(n._snippetResult)),n}),t.__escaped=!0),t}function Yi(t){return btoa(encodeURIComponent(JSON.stringify(t)))}function es(t){return t.$$type==="ais.index"}function gr(t){var e=t.name,n=t.connector,r=n===void 0?!1:n;return["https://www.algolia.com/doc/api-reference/widgets/",e,"/js/",r?"#connector":""].join("")}function ts(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(i){return gr(i)}).join(", ");return function(i){return[i,"See documentation: ".concat(r)].filter(Boolean).join(`

`)}}function rt(t){return t!==Object(t)}function vr(t,e){if(t===e)return!0;if(rt(t)||rt(e)||typeof t=="function"||typeof e=="function")return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(!(i in e)||!vr(t[i],e[i]))return!1}return!0}function Me(t){"@babel/helpers - typeof";return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(t)}var it=Object.prototype.hasOwnProperty;function Y(t,e,n){if(n!=null&&n(t,e))return!0;var r,i;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((i=t.length)===e.length)for(;i--&&Y(t[i],e[i],n););return i===-1}if(!r||Me(t)==="object"){i=0;for(r in t)if(it.call(t,r)&&++i&&!it.call(e,r)||!(r in e)||!Y(t[r],e[r],n))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}function st(t){var e,n,r;return new tr.SearchResults(t,[{query:(e=t.query)!==null&&e!==void 0?e:"",page:(n=t.page)!==null&&n!==void 0?n:0,hitsPerPage:(r=t.hitsPerPage)!==null&&r!==void 0?r:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:t.index}],{__isArtificial:!0})}function ee(t){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(t)}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?at(Object(n),!0).forEach(function(r){mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mr(t,e,n){return e=yr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yr(t){var e=br(t,"string");return ee(e)==="symbol"?e:String(e)}function br(t,e){if(ee(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ee(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rr(t){var e=t.getHelper(),n=t.getResults()||st(e.state),r=t.getScopedResults().map(function(i){var s=i.indexId===t.getIndexId()?n:st(i.helper.state);return ut(ut({},i),{},{results:i.results||s})});return{results:n,scopedResults:r}}function Lt(t,e){if(!t)throw new Error("Invariant failed")}var wr=T.createContext(null);function Fr(){var t=T.useContext(wr);return Lt(t!==null),t}var Pr=T.createContext(null);function Ut(){var t=T.useContext(Pr);return Lt(t!==null),t}var xr=T.createContext(null);function Ar(){return T.useContext(xr)}function Er(t,e){return Sr(t)||Tr(t,e)||Or(t,e)||jr()}function jr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(t,e){if(t){if(typeof t=="string")return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}}function ct(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tr(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,u=[],c=!0,o=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(f){o=!0,i=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(o)throw i}}return u}}function Sr(t){if(Array.isArray(t))return t}function ot(t){var e=T.useState(function(){return t}),n=Er(e,2),r=n[0],i=n[1];return Y(r,t)||i(t),r}var _r="use",ft=Jt[_r],Hr=typeof window<"u"?T.useLayoutEffect:T.useEffect,kr=T.createContext(null);function Dr(){return T.useContext(kr)}function qr(t){var e,n=t.widget,r=t.parentIndex,i=t.props,s=t.shouldSsr,a=Dr(),u=T.useRef(i);T.useEffect(function(){u.current=i},[i]);var c=T.useRef(n);T.useEffect(function(){c.current=n},[n]);var o=T.useRef(null),f=s&&!r.getWidgets().includes(n),d=Ut();if(Hr(function(){var m=c.current;if(!o.current)f||r.addWidgets([n]);else{clearTimeout(o.current);var b=Y(i,u.current);b||(r.removeWidgets([m]),r.addWidgets([n]))}return function(){o.current=setTimeout(function(){d._schedule(function(){d._preventWidgetCleanup||r.removeWidgets([m])})})}},[r,n,f,d,i]),(f||(a==null||(e=a.current)===null||e===void 0?void 0:e.status)==="pending")&&r.addWidgets([n]),typeof window>"u"&&a!==null&&a!==void 0&&a.current&&n.$$type!=="ais.index"){var g;ft(a.current),n.$$type!=="ais.dynamicWidgets"&&(g=d.helper)!==null&&g!==void 0&&g.lastResults&&ft(a.current)}}function te(t){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(t)}var Mr=["instantSearchInstance","widgetParams"],Ir=["widgetParams"];function Br(t,e){return $r(t)||Nr(t,e)||Qr(t,e)||Cr()}function Cr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qr(t,e){if(t){if(typeof t=="string")return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}}function ht(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nr(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,u=[],c=!0,o=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(f){o=!0,i=f}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(o)throw i}}return u}}function $r(t){if(Array.isArray(t))return t}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dt(Object(n),!0).forEach(function(r){Lr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lr(t,e,n){return e=Ur(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ur(t){var e=Vr(t,"string");return te(e)==="symbol"?e:String(e)}function Vr(t,e){if(te(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(te(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pt(t,e){if(t==null)return{};var n=Wr(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wr(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ns(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Ar(),i=Ut(),s=Fr(),a=ot(e),u=ot(n),c=T.useRef(!0),o=T.useRef(null),f=T.useRef(i.status),d=T.useMemo(function(){var w=t(function(P,E){if(E){c.current=!0;return}if(c.current){var F=P.instantSearchInstance;P.widgetParams;var H=pt(P,Mr);(!Y(H,o.current,function(Q,M){return(Q==null?void 0:Q.constructor)===Function&&(M==null?void 0:M.constructor)===Function})||F.status!==f.current)&&(R(H),o.current=H,f.current=F.status)}},function(){c.current=!1});return lt(lt({},w(a)),u)},[t,a,u]),g=T.useState(function(){if(d.getWidgetRenderState){var w,P=s.getHelper(),E=s.getWidgetUiState({})[s.getIndexId()];P.state=((w=d.getWidgetSearchParameters)===null||w===void 0?void 0:w.call(d,P.state,{uiState:E}))||P.state;var F=Rr(s),H=F.results,Q=F.scopedResults,M=d.getWidgetRenderState({helper:P,parent:s,instantSearchInstance:i,results:H,scopedResults:Q,state:P.state,renderState:i.renderState,templatesConfig:i.templatesConfig,createURL:s.createURL,searchMetadata:{isSearchStalled:i.status==="stalled"},status:i.status,error:i.error});M.widgetParams;var I=pt(M,Ir);return I}return{}}),m=Br(g,2),b=m[0],R=m[1];return qr({widget:d,parentIndex:s,props:a,shouldSsr:!!r}),b}(function(){(function(t){(function(e){var n=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof Re<"u"&&Re||{},r={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function i(h){return h&&DataView.prototype.isPrototypeOf(h)}if(r.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(h){return h&&s.indexOf(Object.prototype.toString.call(h))>-1};function u(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function c(h){return typeof h!="string"&&(h=String(h)),h}function o(h){var v={next:function(){var x=h.shift();return{done:x===void 0,value:x}}};return r.iterable&&(v[Symbol.iterator]=function(){return v}),v}function f(h){this.map={},h instanceof f?h.forEach(function(v,x){this.append(x,v)},this):Array.isArray(h)?h.forEach(function(v){if(v.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+v.length);this.append(v[0],v[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(v){this.append(v,h[v])},this)}f.prototype.append=function(h,v){h=u(h),v=c(v);var x=this.map[h];this.map[h]=x?x+", "+v:v},f.prototype.delete=function(h){delete this.map[u(h)]},f.prototype.get=function(h){return h=u(h),this.has(h)?this.map[h]:null},f.prototype.has=function(h){return this.map.hasOwnProperty(u(h))},f.prototype.set=function(h,v){this.map[u(h)]=c(v)},f.prototype.forEach=function(h,v){for(var x in this.map)this.map.hasOwnProperty(x)&&h.call(v,this.map[x],x,this)},f.prototype.keys=function(){var h=[];return this.forEach(function(v,x){h.push(x)}),o(h)},f.prototype.values=function(){var h=[];return this.forEach(function(v){h.push(v)}),o(h)},f.prototype.entries=function(){var h=[];return this.forEach(function(v,x){h.push([x,v])}),o(h)},r.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function d(h){if(!h._noBody){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}}function g(h){return new Promise(function(v,x){h.onload=function(){v(h.result)},h.onerror=function(){x(h.error)}})}function m(h){var v=new FileReader,x=g(v);return v.readAsArrayBuffer(h),x}function b(h){var v=new FileReader,x=g(v),j=/charset=([A-Za-z0-9_-]+)/.exec(h.type),S=j?j[1]:"utf-8";return v.readAsText(h,S),x}function R(h){for(var v=new Uint8Array(h),x=new Array(v.length),j=0;j<v.length;j++)x[j]=String.fromCharCode(v[j]);return x.join("")}function w(h){if(h.slice)return h.slice(0);var v=new Uint8Array(h.byteLength);return v.set(new Uint8Array(h)),v.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:r.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:r.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():r.arrayBuffer&&r.blob&&i(h)?(this._bodyArrayBuffer=w(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||a(h))?this._bodyArrayBuffer=w(h):this._bodyText=h=Object.prototype.toString.call(h):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var h=d(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=d(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(r.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var h=d(this);if(h)return h;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(h){var v=h.toUpperCase();return E.indexOf(v)>-1?v:h}function H(h,v){if(!(this instanceof H))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');v=v||{};var x=v.body;if(h instanceof H){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,v.headers||(this.headers=new f(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!x&&h._bodyInit!=null&&(x=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new f(v.headers)),this.method=F(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal||function(){if("AbortController"in n){var A=new AbortController;return A.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(v.cache==="no-store"||v.cache==="no-cache")){var j=/([?&])_=[^&]*/;if(j.test(this.url))this.url=this.url.replace(j,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function Q(h){var v=new FormData;return h.trim().split("&").forEach(function(x){if(x){var j=x.split("="),S=j.shift().replace(/\+/g," "),A=j.join("=").replace(/\+/g," ");v.append(decodeURIComponent(S),decodeURIComponent(A))}}),v}function M(h){var v=new f,x=h.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(j){return j.indexOf(`
`)===0?j.substr(1,j.length):j}).forEach(function(j){var S=j.split(":"),A=S.shift().trim();if(A){var ae=S.join(":").trim();try{v.append(A,ae)}catch(be){console.warn("Response "+be.message)}}}),v}P.call(H.prototype);function I(h,v){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=v.statusText===void 0?"":""+v.statusText,this.headers=new f(v.headers),this.url=v.url||"",this._initBody(h)}P.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},I.error=function(){var h=new I(null,{status:200,statusText:""});return h.ok=!1,h.status=0,h.type="error",h};var me=[301,302,303,307,308];I.redirect=function(h,v){if(me.indexOf(v)===-1)throw new RangeError("Invalid status code");return new I(null,{status:v,headers:{location:h}})},e.DOMException=n.DOMException;try{new e.DOMException}catch{e.DOMException=function(v,x){this.message=v,this.name=x;var j=Error(v);this.stack=j.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function ye(h,v){return new Promise(function(x,j){var S=new H(h,v);if(S.signal&&S.signal.aborted)return j(new e.DOMException("Aborted","AbortError"));var A=new XMLHttpRequest;function ae(){A.abort()}A.onload=function(){var D={statusText:A.statusText,headers:M(A.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&(A.status<200||A.status>599)?D.status=200:D.status=A.status,D.url="responseURL"in A?A.responseURL:D.headers.get("X-Request-URL");var W="response"in A?A.response:A.responseText;setTimeout(function(){x(new I(W,D))},0)},A.onerror=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},A.ontimeout=function(){setTimeout(function(){j(new TypeError("Network request timed out"))},0)},A.onabort=function(){setTimeout(function(){j(new e.DOMException("Aborted","AbortError"))},0)};function be(D){try{return D===""&&n.location.href?n.location.href:D}catch{return D}}if(A.open(S.method,be(S.url),!0),S.credentials==="include"?A.withCredentials=!0:S.credentials==="omit"&&(A.withCredentials=!1),"responseType"in A&&(r.blob?A.responseType="blob":r.arrayBuffer&&(A.responseType="arraybuffer")),v&&typeof v.headers=="object"&&!(v.headers instanceof f||n.Headers&&v.headers instanceof n.Headers)){var Ge=[];Object.getOwnPropertyNames(v.headers).forEach(function(D){Ge.push(u(D)),A.setRequestHeader(D,c(v.headers[D]))}),S.headers.forEach(function(D,W){Ge.indexOf(W)===-1&&A.setRequestHeader(W,D)})}else S.headers.forEach(function(D,W){A.setRequestHeader(W,D)});S.signal&&(S.signal.addEventListener("abort",ae),A.onreadystatechange=function(){A.readyState===4&&S.signal.removeEventListener("abort",ae)}),A.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return ye.polyfill=!0,n.fetch||(n.fetch=ye,n.Headers=f,n.Request=H,n.Response=I),e.Headers=f,e.Request=H,e.Response=I,e.fetch=ye,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:Re)})();var Ie=function(t,e){return Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ie(t,e)};function se(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ie(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},O.apply(this,arguments)};function l(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(f){try{o(r.next(f))}catch(d){a(d)}}function c(f){try{o(r.throw(f))}catch(d){a(d)}}function o(f){f.done?s(f.value):i(f.value).then(u,c)}o((r=r.apply(t,[])).next())})}function p(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(f){return c([o,f])}}function c(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1],s=o;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(o);break}s[2]&&n.ops.pop(),n.trys.pop();continue}o=e.call(t,n)}catch(f){o=[6,f],i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var Vt=function(t){se(e,t);function e(n,r,i,s){var a=this,u,c,o;return a=t.call(this,n)||this,Object.setPrototypeOf(a,e.prototype),a.name="MeiliSearchCommunicationError",r instanceof Response&&(a.message=r.statusText,a.statusCode=r.status),r instanceof Error&&(a.errno=r.errno,a.code=r.code),s?(a.stack=s,a.stack=(u=a.stack)===null||u===void 0?void 0:u.replace(/(TypeError|FetchError)/,a.name),a.stack=(c=a.stack)===null||c===void 0?void 0:c.replace("Failed to fetch","request to ".concat(i," failed, reason: connect ECONNREFUSED")),a.stack=(o=a.stack)===null||o===void 0?void 0:o.replace("Not Found","Not Found: ".concat(i))):Error.captureStackTrace&&Error.captureStackTrace(a,e),a}return e}(Error),Be=function(t){se(e,t);function e(n,r){var i=t.call(this,n.message)||this;return Object.setPrototypeOf(i,Be.prototype),i.name="MeiliSearchApiError",i.code=n.code,i.type=n.type,i.link=n.link,i.message=n.message,i.httpStatus=r,Error.captureStackTrace&&Error.captureStackTrace(i,Be),i}return e}(Error);function Kr(t){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:if(t.ok)return[3,5];e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.json()];case 2:return e=n.sent(),[3,4];case 3:throw n.sent(),new Vt(t.statusText,t,t.url);case 4:throw new Be(e,t.status);case 5:return[2,t]}})})}function Gr(t,e,n){throw t.name!=="MeiliSearchApiError"?new Vt(t.message,t,n,e):t}var $=function(t){se(e,t);function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r.name="MeiliSearchError",Error.captureStackTrace&&Error.captureStackTrace(r,e),r}return e}(Error),Jr=function(t){se(e,t);function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r.name="MeiliSearchTimeOutError",Error.captureStackTrace&&Error.captureStackTrace(r,e),r}return e}(Error);function ce(t){return Object.entries(t).reduce(function(e,n){var r=n[0],i=n[1];return i!==void 0&&(e[r]=i),e},{})}function zr(t){return l(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,new Promise(function(n){return setTimeout(n,t)})];case 1:return[2,e.sent()]}})})}function Zr(t){return t.startsWith("https://")||t.startsWith("http://")?t:"http://".concat(t)}function Xr(t){return t.endsWith("/")||(t+="/"),t}function Yr(t){var e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi;return e.test(t)}var ei="0.31.1";function Oe(t){var e=Object.keys(t),n=e.reduce(function(r,i){var s,a,u,c=t[i];return c===void 0?r:Array.isArray(c)?O(O({},r),(s={},s[i]=c.join(","),s)):c instanceof Date?O(O({},r),(a={},a[i]=c.toISOString(),a)):O(O({},r),(u={},u[i]=c,u))},{});return n}function ti(t){try{return t=Zr(t),t=Xr(t),t}catch{throw new $("The provided host is not valid.")}}function ni(t){var e="X-Meilisearch-Client",n="Meilisearch JavaScript (v".concat(ei,")"),r="Content-Type";t.headers=t.headers||{};var i=Object.assign({},t.headers);if(t.apiKey&&(i.Authorization="Bearer ".concat(t.apiKey)),t.headers[r]||(i["Content-Type"]="application/json"),t.clientAgents&&Array.isArray(t.clientAgents)){var s=t.clientAgents.concat(n);i[e]=s.join(" ; ")}else{if(t.clientAgents&&!Array.isArray(t.clientAgents))throw new $('Meilisearch: The header "'.concat(e,`" should be an array of string(s).
`));i[e]=n}return i}var le=function(){function t(e){this.headers=ni(e);try{var n=ti(e.host);this.url=new URL(n)}catch{throw new $("The provided host is not valid.")}}return t.prototype.request=function(e){var n=e.method,r=e.url,i=e.params,s=e.body,a=e.config;return l(this,void 0,void 0,function(){var u,c,o,f,d,g;return p(this,function(m){switch(m.label){case 0:u=new URL(r,this.url),i&&(c=new URLSearchParams,Object.keys(i).filter(function(b){return i[b]!==null}).map(function(b){return c.set(b,i[b])}),u.search=c.toString()),m.label=1;case 1:return m.trys.push([1,4,,5]),[4,fetch(u.toString(),O(O({},a),{method:n,body:JSON.stringify(s),headers:this.headers})).then(function(b){return Kr(b)})];case 2:return o=m.sent(),[4,o.json().catch(function(){})];case 3:return f=m.sent(),[2,f];case 4:return d=m.sent(),g=d.stack,Gr(d,g,u.toString()),[3,5];case 5:return[2]}})})},t.prototype.get=function(e,n,r){return l(this,void 0,void 0,function(){return p(this,function(i){switch(i.label){case 0:return[4,this.request({method:"GET",url:e,params:n,config:r})];case 1:return[2,i.sent()]}})})},t.prototype.post=function(e,n,r,i){return l(this,void 0,void 0,function(){return p(this,function(s){switch(s.label){case 0:return[4,this.request({method:"POST",url:e,body:n,params:r,config:i})];case 1:return[2,s.sent()]}})})},t.prototype.put=function(e,n,r,i){return l(this,void 0,void 0,function(){return p(this,function(s){switch(s.label){case 0:return[4,this.request({method:"PUT",url:e,body:n,params:r,config:i})];case 1:return[2,s.sent()]}})})},t.prototype.patch=function(e,n,r,i){return l(this,void 0,void 0,function(){return p(this,function(s){switch(s.label){case 0:return[4,this.request({method:"PATCH",url:e,body:n,params:r,config:i})];case 1:return[2,s.sent()]}})})},t.prototype.delete=function(e,n,r,i){return l(this,void 0,void 0,function(){return p(this,function(s){switch(s.label){case 0:return[4,this.request({method:"DELETE",url:e,body:n,params:r,config:i})];case 1:return[2,s.sent()]}})})},t}(),k=function(){function t(e){this.taskUid=e.taskUid,this.indexUid=e.indexUid,this.status=e.status,this.type=e.type,this.enqueuedAt=new Date(e.enqueuedAt)}return t}(),gt=function(){function t(e){this.indexUid=e.indexUid,this.status=e.status,this.type=e.type,this.uid=e.uid,this.details=e.details,this.canceledBy=e.canceledBy,this.error=e.error,this.duration=e.duration,this.startedAt=new Date(e.startedAt),this.enqueuedAt=new Date(e.enqueuedAt),this.finishedAt=new Date(e.finishedAt)}return t}(),Wt=function(){function t(e){this.httpRequest=new le(e)}return t.prototype.getTask=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="tasks/".concat(e),[4,this.httpRequest.get(n)];case 1:return r=i.sent(),[2,new gt(r)]}})})},t.prototype.getTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="tasks",[4,this.httpRequest.get(n,Oe(e))];case 1:return r=i.sent(),[2,O(O({},r),{results:r.results.map(function(s){return new gt(s)})})]}})})},t.prototype.waitForTask=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){var c,o;return p(this,function(f){switch(f.label){case 0:c=Date.now(),f.label=1;case 1:return Date.now()-c<s?[4,this.getTask(e)]:[3,4];case 2:return o=f.sent(),["enqueued","processing"].includes(o.status)?[4,zr(u)]:[2,o];case 3:return f.sent(),[3,1];case 4:throw new Jr("timeout of ".concat(s,"ms has exceeded on process ").concat(e," when waiting a task to be resolved."))}})})},t.prototype.waitForTasks=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){var c,o,f,d,g;return p(this,function(m){switch(m.label){case 0:c=[],o=0,f=e,m.label=1;case 1:return o<f.length?(d=f[o],[4,this.waitForTask(d,{timeOutMs:s,intervalMs:u})]):[3,4];case 2:g=m.sent(),c.push(g),m.label=3;case 3:return o++,[3,1];case 4:return[2,c]}})})},t.prototype.cancelTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="tasks/cancel",[4,this.httpRequest.post(n,{},Oe(e))];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.deleteTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="tasks",[4,this.httpRequest.delete(n,{},Oe(e))];case 1:return r=i.sent(),[2,new k(r)]}})})},t}(),K=function(){function t(e,n,r){this.uid=n,this.primaryKey=r,this.httpRequest=new le(e),this.tasks=new Wt(e)}return t.prototype.search=function(e,n,r){return l(this,void 0,void 0,function(){var i;return p(this,function(s){switch(s.label){case 0:return i="indexes/".concat(this.uid,"/search"),[4,this.httpRequest.post(i,ce(O({q:e},n)),void 0,r)];case 1:return[2,s.sent()]}})})},t.prototype.searchGet=function(e,n,r){var i,s,a,u,c;return l(this,void 0,void 0,function(){var o,f,d;return p(this,function(g){switch(g.label){case 0:return o="indexes/".concat(this.uid,"/search"),f=function(m){if(typeof m=="string")return m;if(Array.isArray(m))throw new $("The filter query parameter should be in string format when using searchGet")},d=O(O({q:e},n),{filter:f(n==null?void 0:n.filter),sort:(i=n==null?void 0:n.sort)===null||i===void 0?void 0:i.join(","),facets:(s=n==null?void 0:n.facets)===null||s===void 0?void 0:s.join(","),attributesToRetrieve:(a=n==null?void 0:n.attributesToRetrieve)===null||a===void 0?void 0:a.join(","),attributesToCrop:(u=n==null?void 0:n.attributesToCrop)===null||u===void 0?void 0:u.join(","),attributesToHighlight:(c=n==null?void 0:n.attributesToHighlight)===null||c===void 0?void 0:c.join(",")}),[4,this.httpRequest.get(o,ce(d),r)];case 1:return[2,g.sent()]}})})},t.prototype.getRawInfo=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid),[4,this.httpRequest.get(e)];case 1:return n=r.sent(),this.primaryKey=n.primaryKey,this.updatedAt=new Date(n.updatedAt),this.createdAt=new Date(n.createdAt),[2,n]}})})},t.prototype.fetchInfo=function(){return l(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this.getRawInfo()];case 1:return e.sent(),[2,this]}})})},t.prototype.fetchPrimaryKey=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e=this,[4,this.getRawInfo()];case 1:return e.primaryKey=n.sent().primaryKey,[2,this.primaryKey]}})})},t.create=function(e,n,r){return n===void 0&&(n={}),l(this,void 0,void 0,function(){var i,s,a;return p(this,function(u){switch(u.label){case 0:return i="indexes",s=new le(r),[4,s.post(i,O(O({},n),{uid:e}))];case 1:return a=u.sent(),[2,new k(a)]}})})},t.prototype.update=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid),[4,this.httpRequest.patch(n,e)];case 1:return r=i.sent(),r.enqueuedAt=new Date(r.enqueuedAt),[2,r]}})})},t.prototype.delete=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),[2,new k(n)]}})})},t.prototype.getTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.getTasks(O(O({},e),{indexUids:[this.uid]}))];case 1:return[2,n.sent()]}})})},t.prototype.getTask=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.getTask(e)];case 1:return[2,n.sent()]}})})},t.prototype.waitForTasks=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this.tasks.waitForTasks(e,{timeOutMs:s,intervalMs:u})];case 1:return[2,c.sent()]}})})},t.prototype.waitForTask=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this.tasks.waitForTask(e,{timeOutMs:s,intervalMs:u})];case 1:return[2,c.sent()]}})})},t.prototype.getStats=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/stats"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.getDocuments=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/documents"),r=function(){var s;if(Array.isArray(e==null?void 0:e.fields))return(s=e==null?void 0:e.fields)===null||s===void 0?void 0:s.join(",")}(),[4,this.httpRequest.get(n,ce(O(O({},e),{fields:r})))];case 1:return[2,i.sent()]}})})},t.prototype.getDocument=function(e,n){return l(this,void 0,void 0,function(){var r,i;return p(this,function(s){switch(s.label){case 0:return r="indexes/".concat(this.uid,"/documents/").concat(e),i=function(){var a;if(Array.isArray(n==null?void 0:n.fields))return(a=n==null?void 0:n.fields)===null||a===void 0?void 0:a.join(",")}(),[4,this.httpRequest.get(r,ce(O(O({},n),{fields:i})))];case 1:return[2,s.sent()]}})})},t.prototype.addDocuments=function(e,n){return l(this,void 0,void 0,function(){var r,i;return p(this,function(s){switch(s.label){case 0:return r="indexes/".concat(this.uid,"/documents"),[4,this.httpRequest.post(r,e,n)];case 1:return i=s.sent(),[2,new k(i)]}})})},t.prototype.addDocumentsInBatches=function(e,n,r){return n===void 0&&(n=1e3),l(this,void 0,void 0,function(){var i,s,a,u;return p(this,function(c){switch(c.label){case 0:i=[],s=0,c.label=1;case 1:return s<e.length?(u=(a=i).push,[4,this.addDocuments(e.slice(s,s+n),r)]):[3,4];case 2:u.apply(a,[c.sent()]),c.label=3;case 3:return s+=n,[3,1];case 4:return[2,i]}})})},t.prototype.updateDocuments=function(e,n){return l(this,void 0,void 0,function(){var r,i;return p(this,function(s){switch(s.label){case 0:return r="indexes/".concat(this.uid,"/documents"),[4,this.httpRequest.put(r,e,n)];case 1:return i=s.sent(),[2,new k(i)]}})})},t.prototype.updateDocumentsInBatches=function(e,n,r){return n===void 0&&(n=1e3),l(this,void 0,void 0,function(){var i,s,a,u;return p(this,function(c){switch(c.label){case 0:i=[],s=0,c.label=1;case 1:return s<e.length?(u=(a=i).push,[4,this.updateDocuments(e.slice(s,s+n),r)]):[3,4];case 2:u.apply(a,[c.sent()]),c.label=3;case 3:return s+=n,[3,1];case 4:return[2,i]}})})},t.prototype.deleteDocument=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/documents/").concat(e),[4,this.httpRequest.delete(n)];case 1:return r=i.sent(),r.enqueuedAt=new Date(r.enqueuedAt),[2,r]}})})},t.prototype.deleteDocuments=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/documents/delete-batch"),[4,this.httpRequest.post(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.deleteAllDocuments=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/documents"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getSettings=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateSettings=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings"),[4,this.httpRequest.patch(n,e)];case 1:return r=i.sent(),r.enqueued=new Date(r.enqueuedAt),[2,r]}})})},t.prototype.resetSettings=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getPagination=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/pagination"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updatePagination=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/pagination"),[4,this.httpRequest.patch(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetPagination=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/pagination"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),[2,new k(n)]}})})},t.prototype.getSynonyms=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/synonyms"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateSynonyms=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/synonyms"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetSynonyms=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/synonyms"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getStopWords=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/stop-words"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateStopWords=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/stop-words"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetStopWords=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/stop-words"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getRankingRules=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/ranking-rules"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateRankingRules=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/ranking-rules"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetRankingRules=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/ranking-rules"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getDistinctAttribute=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/distinct-attribute"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateDistinctAttribute=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/distinct-attribute"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetDistinctAttribute=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/distinct-attribute"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getFilterableAttributes=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/filterable-attributes"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateFilterableAttributes=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/filterable-attributes"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetFilterableAttributes=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/filterable-attributes"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getSortableAttributes=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/sortable-attributes"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateSortableAttributes=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/sortable-attributes"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetSortableAttributes=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/sortable-attributes"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getSearchableAttributes=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/searchable-attributes"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateSearchableAttributes=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/searchable-attributes"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetSearchableAttributes=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/searchable-attributes"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getDisplayedAttributes=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/displayed-attributes"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateDisplayedAttributes=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/displayed-attributes"),[4,this.httpRequest.put(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetDisplayedAttributes=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/displayed-attributes"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getTypoTolerance=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/typo-tolerance"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateTypoTolerance=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/typo-tolerance"),[4,this.httpRequest.patch(n,e)];case 1:return r=i.sent(),r.enqueuedAt=new Date(r.enqueuedAt),[2,r]}})})},t.prototype.resetTypoTolerance=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/typo-tolerance"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),n.enqueuedAt=new Date(n.enqueuedAt),[2,n]}})})},t.prototype.getFaceting=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="indexes/".concat(this.uid,"/settings/faceting"),[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.updateFaceting=function(e){return l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="indexes/".concat(this.uid,"/settings/faceting"),[4,this.httpRequest.patch(n,e)];case 1:return r=i.sent(),[2,new k(r)]}})})},t.prototype.resetFaceting=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="indexes/".concat(this.uid,"/settings/faceting"),[4,this.httpRequest.delete(e)];case 1:return n=r.sent(),[2,new k(n)]}})})},t}(),ri=function(){function t(e){this.config=e,this.httpRequest=new le(e),this.tasks=new Wt(e)}return t.prototype.index=function(e){return new K(this.config,e)},t.prototype.getIndex=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){return[2,new K(this.config,e).fetchInfo()]})})},t.prototype.getRawIndex=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){return[2,new K(this.config,e).getRawInfo()]})})},t.prototype.getIndexes=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r,i=this;return p(this,function(s){switch(s.label){case 0:return[4,this.getRawIndexes(e)];case 1:return n=s.sent(),r=n.results.map(function(a){return new K(i.config,a.uid,a.primaryKey)}),[2,O(O({},n),{results:r})]}})})},t.prototype.getRawIndexes=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return n="indexes",[4,this.httpRequest.get(n,e)];case 1:return[2,r.sent()]}})})},t.prototype.createIndex=function(e,n){return n===void 0&&(n={}),l(this,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return[4,K.create(e,n,this.config)];case 1:return[2,r.sent()]}})})},t.prototype.updateIndex=function(e,n){return n===void 0&&(n={}),l(this,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return[4,new K(this.config,e).update(n)];case 1:return[2,r.sent()]}})})},t.prototype.deleteIndex=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,new K(this.config,e).delete()];case 1:return[2,n.sent()]}})})},t.prototype.deleteIndexIfExists=function(e){return l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.deleteIndex(e)];case 1:return r.sent(),[2,!0];case 2:if(n=r.sent(),n.code==="index_not_found")return[2,!1];throw n;case 3:return[2]}})})},t.prototype.swapIndexes=function(e){return l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return n="/swap-indexes",[4,this.httpRequest.post(n,e)];case 1:return[2,r.sent()]}})})},t.prototype.getTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.getTasks(e)];case 1:return[2,n.sent()]}})})},t.prototype.getTask=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.getTask(e)];case 1:return[2,n.sent()]}})})},t.prototype.waitForTasks=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this.tasks.waitForTasks(e,{timeOutMs:s,intervalMs:u})];case 1:return[2,c.sent()]}})})},t.prototype.waitForTask=function(e,n){var r=n===void 0?{}:n,i=r.timeOutMs,s=i===void 0?5e3:i,a=r.intervalMs,u=a===void 0?50:a;return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this.tasks.waitForTask(e,{timeOutMs:s,intervalMs:u})];case 1:return[2,c.sent()]}})})},t.prototype.cancelTasks=function(e){return l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.cancelTasks(e)];case 1:return[2,n.sent()]}})})},t.prototype.deleteTasks=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.tasks.deleteTasks(e)];case 1:return[2,n.sent()]}})})},t.prototype.getKeys=function(e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return n="keys",[4,this.httpRequest.get(n,e)];case 1:return r=i.sent(),r.results=r.results.map(function(s){return O(O({},s),{createdAt:new Date(s.createdAt),updateAt:new Date(s.updateAt)})}),[2,r]}})})},t.prototype.getKey=function(e){return l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return n="keys/".concat(e),[4,this.httpRequest.get(n)];case 1:return[2,r.sent()]}})})},t.prototype.createKey=function(e){return l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return n="keys",[4,this.httpRequest.post(n,e)];case 1:return[2,r.sent()]}})})},t.prototype.updateKey=function(e,n){return l(this,void 0,void 0,function(){var r;return p(this,function(i){switch(i.label){case 0:return r="keys/".concat(e),[4,this.httpRequest.patch(r,n)];case 1:return[2,i.sent()]}})})},t.prototype.deleteKey=function(e){return l(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return n="keys/".concat(e),[4,this.httpRequest.delete(n)];case 1:return[2,r.sent()]}})})},t.prototype.health=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="health",[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.isHealthy=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e="health",[4,this.httpRequest.get(e)];case 1:return n.sent(),[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},t.prototype.getStats=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="stats",[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.getVersion=function(){return l(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return e="version",[4,this.httpRequest.get(e)];case 1:return[2,n.sent()]}})})},t.prototype.createDump=function(){return l(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return e="dumps",[4,this.httpRequest.post(e)];case 1:return n=r.sent(),[2,new k(n)]}})})},t.prototype.generateTenantToken=function(e,n,r){var i=new Error;throw new Error(`Meilisearch: failed to generate a tenant token. Generation of a token only works in a node environment 
 `.concat(i.stack,"."))},t}();function Kt(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function ii(t,e,n){return zt.createHmac("sha256",t).update("".concat(e,".").concat(n)).digest("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function si(){var t={alg:"HS256",typ:"JWT"};return Kt(t).replace(/=/g,"")}function ai(t){var e=t.searchRules,n=t.uid,r=t.apiKey,i=t.expiresAt;if(i)if(i instanceof Date){if(i.getTime()<Date.now())throw new $("Meilisearch: The expiresAt field must be a date in the future.")}else throw new $("Meilisearch: The expiredAt field must be an instance of Date.");if(e&&!(typeof e=="object"||Array.isArray(e)))throw new $("Meilisearch: The search rules added in the token generation must be of type array or object.");if(!r||typeof r!="string")throw new $("Meilisearch: The API key used for the token generation must exist and be of type string.");if(!n||typeof n!="string")throw new $("Meilisearch: The uid of the api key used for the token generation must exist, be of type string and comply to the uuid4 format.");if(!Yr(n))throw new $("Meilisearch: The uid of your key is not a valid uuid4. To find out the uid of your key use getKey().")}function ui(t){var e=t.searchRules,n=t.uid,r=t.expiresAt,i={searchRules:e,apiKeyUid:n,exp:r==null?void 0:r.getTime()};return Kt(i).replace(/=/g,"")}var ci=function(){function t(e){this.config=e}return t.prototype.generateTenantToken=function(e,n,r){var i=(r==null?void 0:r.apiKey)||this.config.apiKey||"",s=e||"",a=r==null?void 0:r.expiresAt;ai({apiKey:i,uid:s,expiresAt:a,searchRules:n});var u=si(),c=ui({searchRules:n,uid:s,expiresAt:a}),o=ii(i,u,c);return"".concat(u,".").concat(c,".").concat(o)},t}(),oi=function(t){se(e,t);function e(n){var r=t.call(this,n)||this;return r.tokens=new ci(n),r}return e.prototype.generateTenantToken=function(n,r,i){return typeof window>"u"?this.tokens.generateTenantToken(n,r,i):t.prototype.generateTenantToken.call(this,n,r,i)},e}(ri),V=function(){return V=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V.apply(this,arguments)};function fi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ne(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(f){try{o(r.next(f))}catch(d){a(d)}}function c(f){try{o(r.throw(f))}catch(d){a(d)}}function o(f){f.done?s(f.value):i(f.value).then(u,c)}o((r=r.apply(t,[])).next())})}function re(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(o){return function(f){return c([o,f])}}function c(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(n=0)),n;)try{if(r=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1],s=o;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(o);break}s[2]&&n.ops.pop(),n.trys.pop();continue}o=e.call(t,n)}catch(f){o=[6,f],i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Te(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function hi(t,e){return{searchResponse:function(n,r){return ne(this,void 0,void 0,function(){var i,s,a;return re(this,function(u){switch(u.label){case 0:return i=e.formatKey([r,n.indexUid,n.query,n.pagination]),s=e.getEntry(i),s?[2,s]:[4,t.index(n.indexUid).search(n.query,r)];case 1:return a=u.sent(),e.setEntry(i,a),[2,a]}})})}}}function vt(t){return t*180/Math.PI}function oe(t){return t*Math.PI/180}function di(t,e,n,r){t=oe(t),e=oe(e);var i=Math.cos(t)*Math.cos(e),s=Math.cos(t)*Math.sin(e),a=Math.sin(t);n=oe(n),r=oe(r);var u=Math.cos(n)*Math.cos(r),c=Math.cos(n)*Math.sin(r),o=Math.sin(n),f=i+u,d=s+c,g=a+o,m=Math.sqrt(f*f+d*d),b=Math.atan2(d,f),R=Math.atan2(g,m);return e<r||e>r&&e>Math.PI&&r<-Math.PI?(R=R+Math.PI,b=b+Math.PI):(R=vt(R),b=vt(b)),Math.abs(f)<Math.pow(10,-9)&&Math.abs(d)<Math.pow(10,-9)&&Math.abs(g)<Math.pow(10,-9)&&(R=0,b=0),"".concat(R,",").concat(b)}function li(t,e,n,r){var i=6371e3,s=t*Math.PI/180,a=n*Math.PI/180,u=(n-t)*Math.PI/180,c=(r-e)*Math.PI/180,o=Math.sin(u/2)*Math.sin(u/2)+Math.cos(s)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2),f=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),d=i*f;return d}function pi(t){if(t){var e=t.insideBoundingBox,n=t.aroundLatLng,r=t.aroundRadius,i=t.minimumAroundRadius,s,a;if(n&&(s=n),(r!=null||i!=null)&&(r!=null?a=r:a=i),e&&typeof e=="string"){var u=e.split(","),c=u[0],o=u[1],f=u[2],d=u[3],g=[parseFloat(c),parseFloat(o),parseFloat(f),parseFloat(d)],m=g[0],b=g[1],R=g[2],w=g[3];a=li(m,b,R,w)/2,s=di(m,b,R,w)}if(s!=null&&a!=null){var P=s.split(","),E=P[0],F=P[1];E=Number.parseFloat(E).toFixed(5),F=Number.parseFloat(F).toFixed(5);var H="_geoRadius(".concat(E,", ").concat(F,", ").concat(a,")");return{filter:H}}}}function gi(t){var e={},n=t.aroundLatLng,r=t.aroundLatLngViaIP,i=t.aroundRadius,s=t.aroundPrecision,a=t.minimumAroundRadius,u=t.insideBoundingBox,c=t.insidePolygon;return n&&(e.aroundLatLng=n),r&&console.warn("instant-meilisearch: `aroundLatLngViaIP` is not supported."),i&&(e.aroundRadius=i),s&&console.warn("instant-meilisearch: `aroundPrecision` is not supported.\n    See this discussion to track its implementation https://github.com/meilisearch/product/discussions/264"),a&&(e.minimumAroundRadius=a),u&&(e.insideBoundingBox=u),c&&console.warn("instant-meilisearch: `insidePolygon` is not implented in instant-meilisearch."),e}function Se(t){return t.replace(/:(.*)/i,'="$1"')}function vi(t){return t.reduce(function(e,n){return e+=JSON.stringify(n)},"")}function mi(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function yi(t,e){if(typeof t!="string")throw new TypeError("Provided hostUrl value (1st parameter) is not a string, expected string");if(typeof e!="string"&&typeof e!="function")throw new TypeError("Provided apiKey value (2nd parameter) is not a string or a function, expected string or function")}function mt(t){return typeof t=="string"?Se(t):Array.isArray(t)?t.map(function(e){return Array.isArray(e)?e.map(function(n){return Se(n)}).filter(function(n){return n}):Se(e)}).filter(function(e){return e}):[]}function yt(t){return t===""?[]:typeof t=="string"?[t]:t}function bi(t,e,n){var r=n.trim(),i=yt(t),s=yt(e),a=Te(Te(Te([],i,!0),s,!0),[r],!1),u=a.filter(function(c){return Array.isArray(c)?c.length:c});return u}function Ri(t,e,n){var r=mt(n||[]),i=mt(e||[]);return bi(r,i,t||"")}function wi(t,e,n){return!(!n&&!e&&(!t||t.length===0))}function Fi(t,e){var n=t.page,r=t.hitsPerPage;return e?{limit:r+1,offset:n*r}:{limit:0,offset:0}}function Pi(t,e){var n=t.page,r=t.hitsPerPage;return e?{hitsPerPage:r,page:n+1}:{hitsPerPage:0,page:n+1}}function Gt(t){var e={},n=t.facets,r=t.attributesToSnippet,i=t.snippetEllipsisText,s=t.attributesToRetrieve,a=t.attributesToHighlight,u=t.highlightPreTag,c=t.highlightPostTag,o=t.placeholderSearch,f=t.query,d=t.sort,g=t.pagination,m=t.matchingStrategy,b=t.filters,R=t.numericFilters,w=t.facetFilters,P=Ri(b,R,w);return{getParams:function(){return e},addFacets:function(){Array.isArray(n)?e.facets=n:typeof n=="string"&&(e.facets=[n])},addAttributesToCrop:function(){r&&(e.attributesToCrop=r)},addCropMarker:function(){i!=null&&(e.cropMarker=i)},addAttributesToRetrieve:function(){s&&(e.attributesToRetrieve=s)},addFilters:function(){P.length&&(e.filter=P)},addAttributesToHighlight:function(){e.attributesToHighlight=a||["*"]},addPreTag:function(){u?e.highlightPreTag=u:e.highlightPreTag="__ais-highlight__"},addPostTag:function(){c?e.highlightPostTag=c:e.highlightPostTag="__/ais-highlight__"},addPagination:function(){var E=wi(P,f,o);if(g.finite){var F=Pi(g,E),H=F.hitsPerPage,Q=F.page;e.hitsPerPage=H,e.page=Q}else{var M=Fi(g,E),I=M.limit,me=M.offset;e.limit=I,e.offset=me}},addSort:function(){d!=null&&d.length&&(e.sort=[d])},addGeoSearchRules:function(){var E=gi(t),F=pi(E);F!=null&&F.filter&&(e.filter?e.filter.unshift(F.filter):e.filter=[F.filter])},addMatchingStrategy:function(){m&&(e.matchingStrategy=m)}}}function xi(t){var e=Gt(t);return e.addFacets(),e.addAttributesToHighlight(),e.addPreTag(),e.addPostTag(),e.addAttributesToRetrieve(),e.addAttributesToCrop(),e.addCropMarker(),e.addPagination(),e.addFilters(),e.addSort(),e.addGeoSearchRules(),e.addMatchingStrategy(),e.getParams()}function Ai(t){return typeof t=="string"?t:JSON.stringify(t===void 0?null:t)}function Ce(t){return Array.isArray(t)?t.map(function(e){return Ce(e)}):mi(t)?Object.keys(t).reduce(function(e,n){return e[n]=Ce(t[n]),e},{}):{value:Ai(t)}}function Ei(t){if(!t)return{};var e=Ce(t),n={_highlightResult:e,_snippetResult:e};return n}function ji(t){for(var e,n=0;n<t.length;n++){var r="".concat(n+Math.random()*1e6);t[n]._geo&&(t[n]._geoloc=t[n]._geo,t[n].objectID=r),!((e=t[n]._formatted)===null||e===void 0)&&e._geo&&(t[n]._formatted._geoloc=t[n]._formatted._geo,t[n]._formatted.objectID=r)}return t}function Oi(t,e){var n=e.primaryKey,r=t.hits,i=e.pagination,s=i.finite,a=i.hitsPerPage;!s&&r.length>a&&r.splice(r.length-1,1);var u=r.map(function(c){if(Object.keys(c).length>0){var o=c._formatted;c._matchesPosition;var f=fi(c,["_formatted","_matchesPosition"]),d=Object.assign(f,Ei(o));return n&&(d.objectID=c[n]),d}return c});return u=ji(u),u}function Ti(t){var e=t.hitsPerPage,n=e===void 0?0:e,r=t.totalPages,i=r===void 0?0:r,s=t.estimatedTotalHits,a=t.totalHits;return s??a??n*i}function Si(t,e){if(t.totalPages!=null)return t.totalPages;if(e===0)return 0;var n=t.limit,r=n===void 0?20:n,i=t.offset,s=i===void 0?0:i,a=t.hits,u=a.length>=r?1:0;return s/e+1+u}function _i(t,e){var n=e.hitsPerPage,r=e.page,i=Si(t,n);return{page:r,nbPages:i,hitsPerPage:n}}function Hi(t){if(t){if(typeof t=="string")return[t]}else return[];return t}function ki(t,e,n){for(var r=Hi(t),i={},s=0,a=r;s<a.length;s++){var u=a[s];for(var c in e[u])i[u]||(i[u]=n[u]||{}),i[u][c]?i[u][c]=n[u][c]:i[u][c]=0}return i}function Di(t,e,n,r){return t?(r=r||{},ki(e,n,r)):r}function qi(t,e,n){var r={},i=t.processingTimeMs,s=t.query,a=t.facetDistribution,u=e.keepZeroFacets,c=e.facets,o=_i(t,e.pagination),f=o.hitsPerPage,d=o.page,g=o.nbPages,m=Oi(t,e),b=Ti(t),R=Di(u,c,n,a),w=V({index:e.indexUid,hitsPerPage:f,page:d,facets:R,nbPages:g,nbHits:b,processingTimeMS:i,query:s,hits:m,params:"",exhaustiveNbHits:!1},r);return w}function Mi(t,e,n){return{hitsPerPage:e===void 0?20:e,page:n||0,finite:!!t}}function Ii(t,e){var n=t.indexName.split(":"),r=n[0],i=n.slice(1),s=t.params,a=Mi(e.finitePagination,s==null?void 0:s.hitsPerPage,s==null?void 0:s.page),u=V(V(V({},e),s),{sort:i.join(":")||"",indexUid:r,pagination:a,placeholderSearch:e.placeholderSearch!==!1,keepZeroFacets:!!e.keepZeroFacets});return u}function Bi(t){t===void 0&&(t={});var e=t;return{getEntry:function(n){if(e[n])try{return JSON.parse(e[n])}catch{return e[n]}},formatKey:function(n){return vi(n)},setEntry:function(n,r){e[n]=JSON.stringify(r)},clearCache:function(){e={}}}}function Ci(t,e){return ne(this,void 0,void 0,function(){var n,r,i;return re(this,function(s){switch(s.label){case 0:return n=V(V({},e),{placeholderSearch:!0,query:""}),r=Gt(n),r.addFacets(),r.addPagination(),[4,t.searchResponse(n,r.getParams())];case 1:return i=s.sent(),[2,i.facetDistribution||{}]}})})}function Qi(t,e,n){return ne(this,void 0,void 0,function(){var r,i;return re(this,function(s){switch(s.label){case 0:return n[e.indexUid]?[3,2]:(r=n,i=e.indexUid,[4,Ci(t,e)]);case 1:r[i]=s.sent(),s.label=2;case 2:return[2,n]}})})}var Ni="0.11.1",$i=function(t){t===void 0&&(t=[]);var e="Meilisearch instant-meilisearch (v".concat(Ni,")");return t.concat(e)};function Li(t,e,n){e===void 0&&(e=""),n===void 0&&(n={}),yi(t,e),e=Ui(e);var r=$i(n.clientAgents),i=new oi({host:t,apiKey:e,clientAgents:r}),s=Bi(),a=hi(i,s),u={};return{clearCache:function(){return s.clearCache()},search:function(c){return ne(this,void 0,void 0,function(){var o,f,d,g,m,b,R,w,P,E;return re(this,function(F){switch(F.label){case 0:F.trys.push([0,6,,7]),o={results:[]},f=c,d=0,g=f,F.label=1;case 1:return d<g.length?(m=g[d],b=Ii(m,n),R=xi(b),[4,Qi(a,b,u)]):[3,5];case 2:return u=F.sent(),[4,a.searchResponse(b,R)];case 3:w=F.sent(),P=qi(w,b,u[b.indexUid]),o.results.push(P),F.label=4;case 4:return d++,[3,1];case 5:return[2,o];case 6:throw E=F.sent(),console.error(E),new Error(E);case 7:return[2]}})})},searchForFacetValues:function(c){return ne(this,void 0,void 0,function(){return re(this,function(o){switch(o.label){case 0:return[4,new Promise(function(f,d){d(new Error("SearchForFacetValues is not compatible with Meilisearch")),f([])})];case 1:return[2,o.sent()]}})})}}}function Ui(t){if(typeof t=="function"){var e=t();if(typeof e!="string")throw new TypeError("Provided apiKey function (2nd parameter) did not return a string, expected string");return e}return t}var bt;(function(t){t.ALL="all",t.LAST="last"})(bt||(bt={}));const Vi={page:0,hits:[],query:"",nbHits:0,nbPages:0,hitsPerPage:0,processingTimeMS:0,exhaustiveNbHits:!1},rs=t=>{const e=T.useRef(!0),n=T.useRef(!0),r=T.useMemo(()=>Li(t.searchUrl,t.searchApiKey,{primaryKey:"id",...(t==null?void 0:t.searchOptions)??{}}),[t==null?void 0:t.searchOptions,t.searchApiKey,t.searchUrl]);return{searchClient:T.useMemo(()=>({...r,search(s){return t!=null&&t.omitSearchOnFirstRender&&e.current?(e.current=!1,Promise.resolve({results:[Vi]})):t!=null&&t.firstSearchResults&&t.firstSearchResults.length&&n.current?(n.current=!1,Promise.resolve({results:t.firstSearchResults})):r.search(s)}}),[r,t==null?void 0:t.omitSearchOnFirstRender,t==null?void 0:t.firstSearchResults])}};export{Gi as E,xr as I,tt as T,zi as a,Ut as b,ts as c,Fr as d,Hr as e,Xi as f,Rr as g,vr as h,es as i,rs as j,nt as k,Zi as l,fr as m,Ji as n,tr as o,Ar as p,Dr as q,Y as r,Yi as s,Pr as t,ns as u,wr as v};
