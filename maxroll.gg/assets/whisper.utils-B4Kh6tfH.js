import{c as W,k as Q,u as h}from"./useUiStateStore-BTW2eq2x.js";const P=i=>(e,r=1)=>i("body.wtbChaosPattern",{chaos:h(e,r),interpolation:{escapeValue:!1}}),C=i=>e=>i("body.wtbDivPattern",{div:e,interpolation:{escapeValue:!1}}),j=i=>e=>i("body.wtbExaltedPattern",{ex:e,interpolation:{escapeValue:!1}}),A=i=>e=>i("body.wtbRegalPattern",{regal:e,interpolation:{escapeValue:!1}}),$=i=>(e,r)=>i("body.wtbMixedPattern",{div:e,chaos:h(r,0),interpolation:{escapeValue:!1}}),q=(i,e,r,g,t)=>{try{const a=g.getFixedT(e.meta.locale||"en","common"),n=o=>a(`categories.${o}`),l=(o,s,c)=>t?(o+(c||0))*s:o*s,y=o=>l(o.price,o.selectedQuantity??0,e.meta.regexExtraPrice),V=P(a),v=C(a),x=$(a),u=()=>{const o=Math.trunc(e.meta.calculatedTotalPrice/i),s=e.meta.calculatedTotalPrice%i,c=r.map(b=>b.selectedQuantity??0).reduce((b,M)=>b+M,0),m=a("body.wtbAllMode",{count:c});return o>0&&s>0?a("body.wtbAllWhisperMixed",{ign:e.meta.ign,mode:m,category:n(e.meta.subCategory||e.meta.category),price:x(o,s),interpolation:{escapeValue:!1}}):o>0?a("body.wtbAllWhisperDiv",{ign:e.meta.ign,mode:m,category:n(e.meta.subCategory||e.meta.category),price:v(o),interpolation:{escapeValue:!1}}):a("body.wtbAllWhisperChaos",{ign:e.meta.ign,mode:m,category:n(e.meta.subCategory||e.meta.category),price:V(s),interpolation:{escapeValue:!1}})};if(e.meta.listingMode==="bulk")navigator.clipboard.writeText(u());else if(r.length>0)if(r.length===e.items.length&&r.every(o=>o.selectedQuantity>=o.quantity)){const o=u();navigator.clipboard.writeText(o)}else{const o=W(r.filter(p=>p.selectedQuantity>0&&p.price),p=>p.displayName),s=p=>p.replace(/(^\w{1})|(\s+\w{1})/g,w=>w.toUpperCase());let c=Object.entries(o).map(([p,w])=>{const B={name:s(p),props:[],price:w.reduce((d,f)=>d+y(f),0)};return w.forEach(d=>{const f=Q(d.unsafeHashProperties,!0).map(k=>k.value).join(", ");B.props.push({keys:s(f),quantity:d.selectedQuantity??0})}),a("body.wtbSingleItem",{props:`${B.props.map(d=>`${d.quantity}${d.keys.length>0?` (${d.keys})`:""}`).join(", ")}`,name:B.name,price:V(B.price),interpolation:{escapeValue:!1}})}).join(", ");const m=r.reduce((p,w)=>p+y(w),0),b=Math.trunc(m/i),M=m%i;c.length>400&&(c=c.substring(0,350)+" ... "+a("body.useNotificationView"));const T=t?a("body.wtbRegexPattern",{regex:t,interpolation:{escapeValue:!1}}):"";let S="";b>0&&M>0?S=a("body.wtbWhisperMixed",{ign:e.meta.ign,items:c,price:x(b,M),regex:T,interpolation:{escapeValue:!1}}):b>0?S=a("body.wtbWhisperDiv",{ign:e.meta.ign,items:c,price:v(b),regex:T,interpolation:{escapeValue:!1}}):S=a("body.wtbWhisperChaos",{ign:e.meta.ign,items:c,price:V(M),regex:T,interpolation:{escapeValue:!1}}),navigator.clipboard.writeText(S)}}catch(a){console.error(a)}},D=(i,e,r,g)=>{try{const t=r.getFixedT(e.locale||"en","common"),a=t(`services.${e.serviceName.replace("Cruel","")}`);if(e.priceValue)if(i==="poe1"){if(!g)return;let n=e.priceValue;e.priceType==="d"&&(n=e.priceValue*g);let l=Math.trunc(n/g),y=n%g;l=h(l,2),y=h(y,2);const V=P(t),v=C(t),x=$(t);let u="";l>0&&y>0?u=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:x(l,y),interpolation:{escapeValue:!1}}):l>0?u=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:v(l),interpolation:{escapeValue:!1}}):u=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:V(y),interpolation:{escapeValue:!1}}),navigator.clipboard.writeText(u)}else{let n="";const l=h(e.priceValue,2);e.priceType==="c"?n=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:P(t)(l),interpolation:{escapeValue:!1}}):e.priceType==="d"?n=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:C(t)(l),interpolation:{escapeValue:!1}}):e.priceType==="ex"?n=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:j(t)(e.priceValue),interpolation:{escapeValue:!1}}):e.priceType==="r"&&(n=t("body.wtbService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),price:A(t)(e.priceValue),interpolation:{escapeValue:!1}})),navigator.clipboard.writeText(n)}else{const n=t("body.wtbFreeService",{ign:e.ign,name:a,location:e.location==="Buyer"?t("body.locationBuyersMap"):t("body.locationSellerMap"),interpolation:{escapeValue:!1}});navigator.clipboard.writeText(n)}}catch(t){console.error(t)}};export{D as F,q as Q};
